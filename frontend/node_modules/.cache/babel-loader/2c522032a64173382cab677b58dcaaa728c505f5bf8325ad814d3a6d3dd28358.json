{"ast":null,"code":"import _objectSpread from\"/Users/mikelnietoirureta/Documents/CODE/PrepCoachWeb/dragon-fit/dragon-fit/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,createContext,useContext}from'react';import{BrowserRouter,Routes,Route,Navigate,useNavigate,useLocation,Link}from'react-router-dom';import{LineChart,Line,XAxis,YAxis,Tooltip,ResponsiveContainer}from'recharts';import{Dumbbell,Activity,Calendar,User,TrendingUp,Plus,Save,LogOut,ChevronRight,X,Trash2,Edit,Download,FileSpreadsheet,FileText,Play}from'lucide-react';import'./App.css';import PrivacyPolicyPage from\"./pages/PrivacyPolicyPage\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_BACKEND_URL||'https://dragon-fit.vercel.app';// ==============================\n// JWT AUTH HELPER (PWA SAFE)\n// ==============================\nconst apiFetch=async function(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const token=localStorage.getItem(\"token\");const headers=_objectSpread({\"Content-Type\":\"application/json\"},options.headers||{});if(token){headers[\"Authorization\"]=\"Bearer \".concat(token);}return fetch(\"\".concat(API_URL).concat(endpoint),_objectSpread(_objectSpread({},options),{},{headers}));};// Auth Context\nconst AuthContext=/*#__PURE__*/createContext(null);const useAuth=()=>useContext(AuthContext);const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{checkAuth();},[]);const checkAuth=async()=>{try{const response=await apiFetch(\"/api/auth/me\");if(response.ok){const userData=await response.json();setUser(userData);}}catch(error){console.error(\"Auth check failed:\",error);}finally{setLoading(false);}};const login=(userData,token)=>{setUser(userData);if(token){localStorage.setItem('token',token);}};const logout=async()=>{localStorage.removeItem('token');setUser(null);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,loading,login,logout,checkAuth},children:children});};// Protected Route\nconst ProtectedRoute=_ref2=>{let{children}=_ref2;const{user,loading}=useAuth();const location=useLocation();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",style:{minHeight:'100vh'},children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})});}if(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location},replace:true});}return children;};// Auth Callback Component\nconst AuthCallback=()=>{const navigate=useNavigate();const{login}=useAuth();const hasProcessed=useRef(false);useEffect(()=>{if(hasProcessed.current)return;hasProcessed.current=true;const processAuth=async()=>{const hash=window.location.hash;const sessionIdMatch=hash.match(/session_id=([^&]+)/);if(sessionIdMatch){const sessionId=sessionIdMatch[1];try{const response=await apiFetch(\"/api/auth/session\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({session_id:sessionId})});if(response.ok){const data=await response.json();login(data.user,data.token);navigate('/dashboard',{replace:true});return;}}catch(error){console.error('Auth callback error:',error);}}navigate('/login',{replace:true});};processAuth();},[navigate,login]);return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",style:{minHeight:'100vh'},children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})});};// Login Page\nconst LoginPage=()=>{const[isLogin,setIsLogin]=useState(true);const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[name,setName]=useState(\"\");const[acceptedPrivacy,setAcceptedPrivacy]=useState(false);const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);const navigate=useNavigate();const{login}=useAuth();const handleSubmit=async e=>{e.preventDefault();setError(\"\");// ✅ Validación extra en registro\nif(!isLogin&&!acceptedPrivacy){setError(\"Debes aceptar la Política de Privacidad para registrarte.\");return;}setLoading(true);try{const endpoint=isLogin?\"/api/auth/login\":\"/api/auth/register\";const body=isLogin?{email,password}:{email,password,name};const response=await apiFetch(\"\".concat(endpoint),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)});const data=await response.json();if(!response.ok){throw new Error(data.detail||\"Error de autenticación\");}login(data.user,data.token);navigate(\"/dashboard\",{replace:true});}catch(err){setError(err.message);}finally{setLoading(false);}};const handleGoogleLogin=()=>{const redirectUrl=window.location.origin+\"/dashboard\";window.location.href=\"https://auth.emergentagent.com/?redirect=\".concat(encodeURIComponent(redirectUrl));};return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-page\",\"data-testid\":\"login-page\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/dragon-logo.png\",alt:\"DragonFit\",className:\"auth-logo\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"auth-title neon-text\",children:\"DragonFit\"}),/*#__PURE__*/_jsx(\"p\",{className:\"auth-subtitle\",children:\"Tu compa\\xF1ero de entrenamiento\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-form\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[!isLogin&&/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Tu nombre\",value:name,onChange:e=>setName(e.target.value),required:!isLogin,\"data-testid\":\"register-name-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"input\",placeholder:\"tu@email.com\",value:email,onChange:e=>setEmail(e.target.value),required:true,\"data-testid\":\"email-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"input\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",value:password,onChange:e=>setPassword(e.target.value),required:true,\"data-testid\":\"password-input\"})]}),!isLogin&&/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"flex-start\",gap:\"8px\",marginBottom:\"16px\",fontSize:\"13px\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:acceptedPrivacy,onChange:e=>setAcceptedPrivacy(e.target.checked),style:{marginTop:\"3px\"},\"data-testid\":\"privacy-checkbox\"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:\"var(--muted-foreground)\"},children:[\"He le\\xEDdo y acepto la\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/privacy\",target:\"_blank\",style:{fontWeight:600},children:\"Pol\\xEDtica de Privacidad\"})]})]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"var(--destructive)\",fontSize:\"14px\",marginBottom:\"16px\"},children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-full\",disabled:loading,\"data-testid\":\"submit-button\",children:loading?\"Cargando...\":isLogin?\"Iniciar Sesión\":\"Registrarse\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"auth-divider\",children:\"o\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary w-full\",onClick:handleGoogleLogin,\"data-testid\":\"google-login-button\",children:\"Continuar con Google\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"auth-switch\",children:[isLogin?\"¿No tienes cuenta? \":\"¿Ya tienes cuenta? \",/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:e=>{e.preventDefault();setIsLogin(!isLogin);},children:isLogin?\"Regístrate\":\"Inicia Sesión\"})]})]})]});};// Dashboard Page\nconst DashboardPage=()=>{var _user$name;const[workouts,setWorkouts]=useState([]);const[stats,setStats]=useState(null);const[loading,setLoading]=useState(true);const[showCreateModal,setShowCreateModal]=useState(false);const{user}=useAuth();const navigate=useNavigate();useEffect(()=>{fetchData();},[]);const fetchData=async()=>{try{const[workoutsRes,statsRes]=await Promise.all([apiFetch(\"/api/workouts\",{}),apiFetch(\"/api/stats\",{})]);if(workoutsRes.ok)setWorkouts(await workoutsRes.json());if(statsRes.ok)setStats(await statsRes.json());}catch(error){console.error('Error fetching data:',error);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container animate-fade-in\",\"data-testid\":\"dashboard-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted\",style:{fontSize:'14px',marginBottom:'4px'},children:[\"Hola, \",(user===null||user===void 0?void 0:(_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.split(' ')[0])||'Atleta']}),/*#__PURE__*/_jsx(\"h1\",{className:\"header-title\",children:\"Dashboard\"})]}),/*#__PURE__*/_jsx(\"img\",{src:\"/dragon-logo.png\",alt:\"DragonFit\",className:\"header-logo\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:(stats===null||stats===void 0?void 0:stats.total_workouts)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Rutinas\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:(stats===null||stats===void 0?void 0:stats.total_sessions)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Sesiones\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:(stats===null||stats===void 0?void 0:stats.sessions_this_week)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Esta Semana\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-value\",children:[Math.round(((stats===null||stats===void 0?void 0:stats.total_volume)||0)/1000),\"k\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Volumen (kg)\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-4\",children:/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'20px',color:'var(--foreground)'},children:\"Mis Rutinas\"})}),workouts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(Dumbbell,{className:\"empty-icon\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"empty-title\",children:\"Sin Rutinas\"}),/*#__PURE__*/_jsx(\"p\",{className:\"empty-desc\",children:\"Crea tu primera rutina de entrenamiento\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:()=>setShowCreateModal(true),\"data-testid\":\"create-first-workout-btn\",children:[/*#__PURE__*/_jsx(Plus,{size:20}),\"Crear Rutina\"]})]}):workouts.map(workout=>{var _workout$days;return/*#__PURE__*/_jsxs(\"div\",{className:\"workout-card\",onClick:()=>navigate(\"/workout/\".concat(workout.workout_id)),\"data-testid\":\"workout-card-\".concat(workout.workout_id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"workout-card-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"workout-card-title\",children:workout.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"workout-card-days\",children:[((_workout$days=workout.days)===null||_workout$days===void 0?void 0:_workout$days.length)||0,\" d\\xEDas\"]})]}),workout.description&&/*#__PURE__*/_jsx(\"p\",{className:\"workout-card-desc\",children:workout.description}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px',marginTop:'12px',color:'var(--primary)'},children:[/*#__PURE__*/_jsx(ChevronRight,{size:16}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px',fontWeight:'600',textTransform:'uppercase'},children:\"Ver detalles\"})]})]},workout.workout_id);}),/*#__PURE__*/_jsx(\"button\",{className:\"fab\",onClick:()=>navigate('/workout/create'),children:/*#__PURE__*/_jsx(Plus,{size:24})}),showCreateModal&&/*#__PURE__*/_jsx(CreateWorkoutModal,{onClose:()=>setShowCreateModal(false),onCreated:()=>{setShowCreateModal(false);fetchData();}})]});};// Create Workout Modal\nconst CreateWorkoutModal=_ref3=>{let{onClose,onCreated}=_ref3;const[name,setName]=useState('');const[description,setDescription]=useState('');const[days,setDays]=useState([{day_number:1,name:'Día 1',exercises:[]}]);const[loading,setLoading]=useState(false);const addDay=()=>{setDays([...days,{day_number:days.length+1,name:\"D\\xEDa \".concat(days.length+1),exercises:[]}]);};const updateDayName=(index,newName)=>{const updated=[...days];updated[index].name=newName;setDays(updated);};const addExercise=dayIndex=>{const updated=[...days];updated[dayIndex].exercises.push({name:'',sets:'',notes:''});setDays(updated);};const updateExercise=(dayIndex,exerciseIndex,field,value)=>{const updated=[...days];updated[dayIndex].exercises[exerciseIndex][field]=value;setDays(updated);};const removeExercise=(dayIndex,exerciseIndex)=>{const updated=[...days];updated[dayIndex].exercises.splice(exerciseIndex,1);setDays(updated);};const handleSubmit=async()=>{if(!name.trim())return;setLoading(true);try{const response=await apiFetch(\"/api/workouts\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,description,days})});if(response.ok){onCreated();}}catch(error){console.error('Error creating workout:',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),\"data-testid\":\"create-workout-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"modal-title\",children:\"Nueva Rutina\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-icon btn-secondary\",onClick:onClose,children:/*#__PURE__*/_jsx(X,{size:20})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Ej: Rutina Volumen\",value:name,onChange:e=>setName(e.target.value),\"data-testid\":\"workout-name-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Descripci\\xF3n opcional\",value:description,onChange:e=>setDescription(e.target.value),\"data-testid\":\"workout-description-input\"})]}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'16px',marginBottom:'12px',color:'var(--foreground)'},children:\"D\\xEDas de Entrenamiento\"}),days.map((day,dayIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",style:{background:'var(--secondary)'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input mb-2\",value:day.name,onChange:e=>updateDayName(dayIndex,e.target.value),style:{fontWeight:'600'},\"data-testid\":\"day-name-input-\".concat(dayIndex)}),day.exercises.map((exercise,exIndex)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',marginBottom:'8px',alignItems:'flex-start'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Ejercicio\",value:exercise.name,onChange:e=>updateExercise(dayIndex,exIndex,'name',e.target.value),style:{marginBottom:'4px'},\"data-testid\":\"exercise-name-\".concat(dayIndex,\"-\").concat(exIndex)}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'4px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Series (3x10)\",value:exercise.sets,onChange:e=>updateExercise(dayIndex,exIndex,'sets',e.target.value),style:{flex:1},\"data-testid\":\"exercise-sets-\".concat(dayIndex,\"-\").concat(exIndex)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Notas\",value:exercise.notes,onChange:e=>updateExercise(dayIndex,exIndex,'notes',e.target.value),style:{flex:1}})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-icon btn-danger\",onClick:()=>removeExercise(dayIndex,exIndex),style:{marginTop:'4px'},children:/*#__PURE__*/_jsx(Trash2,{size:16})})]},exIndex)),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-outline w-full\",onClick:()=>addExercise(dayIndex),\"data-testid\":\"add-exercise-btn-\".concat(dayIndex),children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"A\\xF1adir Ejercicio\"]})]},dayIndex)),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary w-full mb-4\",onClick:addDay,\"data-testid\":\"add-day-btn\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"A\\xF1adir D\\xEDa\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary w-full\",onClick:handleSubmit,disabled:loading||!name.trim(),\"data-testid\":\"save-workout-btn\",children:[/*#__PURE__*/_jsx(Save,{size:16}),loading?'Guardando...':'Guardar Rutina']})]})});};// Workout Detail Page\nconst WorkoutDetailPage=()=>{var _workout$days2,_workout$days3,_currentDay$exercises;const[workout,setWorkout]=useState(null);const[sessions,setSessions]=useState([]);const[activeDay,setActiveDay]=useState(0);const[loading,setLoading]=useState(true);const[showLogModal,setShowLogModal]=useState(false);const[showEditModal,setShowEditModal]=useState(false);const{workoutId}=useParams();const navigate=useNavigate();useEffect(()=>{fetchWorkout();},[workoutId]);const fetchWorkout=async()=>{try{const[workoutRes,sessionsRes]=await Promise.all([apiFetch(\"/api/workouts/\".concat(workoutId),{}),apiFetch(\"/api/sessions?workout_id=\".concat(workoutId),{})]);if(workoutRes.ok)setWorkout(await workoutRes.json());if(sessionsRes.ok)setSessions(await sessionsRes.json());}catch(error){console.error('Error fetching workout:',error);}finally{setLoading(false);}};const handleDelete=async()=>{if(!window.confirm('¿Eliminar esta rutina?'))return;try{const response=await apiFetch(\"/api/workouts/\".concat(workoutId),{method:'DELETE'});if(response.ok){navigate('/dashboard');}}catch(error){console.error('Error deleting workout:',error);}};const handleExport=async format=>{try{const response=await apiFetch(\"/api/export/\".concat(format,\"/\").concat(workoutId),{});if(response.ok){const blob=await response.blob();const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"DragonFit_\".concat(workout.name,\".\").concat(format==='excel'?'xlsx':'pdf');a.click();window.URL.revokeObjectURL(url);}}catch(error){console.error('Error exporting:',error);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})});}if(!workout){return/*#__PURE__*/_jsx(\"div\",{className:\"page-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"empty-title\",children:\"Rutina no encontrada\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>navigate('/dashboard'),children:\"Volver\"})]})});}const currentDay=(_workout$days2=workout.days)===null||_workout$days2===void 0?void 0:_workout$days2[activeDay];return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container animate-fade-in\",\"data-testid\":\"workout-detail-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-secondary mb-2\",onClick:()=>navigate('/dashboard'),children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"header-title\",children:workout.name})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-icon btn-secondary\",onClick:()=>navigate(\"/workout/\".concat(workout.workout_id,\"/edit\")),\"data-testid\":\"edit-workout-btn\",children:/*#__PURE__*/_jsx(Edit,{size:18})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-icon btn-danger\",onClick:handleDelete,\"data-testid\":\"delete-workout-btn\",children:/*#__PURE__*/_jsx(Trash2,{size:18})})]})]}),workout.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-4\",children:workout.description}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',marginBottom:'16px'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-outline\",onClick:()=>handleExport('excel'),\"data-testid\":\"export-excel-btn\",children:[/*#__PURE__*/_jsx(FileSpreadsheet,{size:16}),\"Excel\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-outline\",onClick:()=>handleExport('pdf'),\"data-testid\":\"export-pdf-btn\",children:[/*#__PURE__*/_jsx(FileText,{size:16}),\"PDF\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"day-tabs\",children:(_workout$days3=workout.days)===null||_workout$days3===void 0?void 0:_workout$days3.map((day,index)=>/*#__PURE__*/_jsx(\"button\",{className:\"day-tab \".concat(activeDay===index?'active':''),onClick:()=>setActiveDay(index),\"data-testid\":\"day-tab-\".concat(index),children:day.name},index))}),(currentDay===null||currentDay===void 0?void 0:(_currentDay$exercises=currentDay.exercises)===null||_currentDay$exercises===void 0?void 0:_currentDay$exercises.length)>0?currentDay.exercises.map((exercise,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"exercise-item\",\"data-testid\":\"exercise-item-\".concat(index),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"exercise-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"exercise-name\",children:exercise.name}),/*#__PURE__*/_jsx(\"span\",{className:\"exercise-sets\",children:exercise.sets})]}),exercise.notes&&/*#__PURE__*/_jsx(\"p\",{className:\"exercise-notes\",children:exercise.notes})]},index)):/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No hay ejercicios en este d\\xEDa\"})}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary w-full mt-4\",onClick:()=>navigate(\"/workout/\".concat(workout.workout_id,\"/log/\").concat(activeDay)),children:[/*#__PURE__*/_jsx(Play,{size:18}),\"Registrar Sesi\\xF3n\"]}),sessions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'16px',marginBottom:'12px',color:'var(--foreground)'},children:\"Sesiones Recientes\"}),sessions.slice(0,5).map(session=>{var _session$exercises;return/*#__PURE__*/_jsx(\"div\",{className:\"card mb-2\",style:{padding:'12px',cursor:'pointer'},onClick:()=>{console.log('Clic en sesión:',session.session_id);navigate(\"/session/\".concat(session.session_id));},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{fontWeight:'600',color:'var(--foreground)'},children:session.day_name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",style:{fontSize:'12px'},children:session.date})]}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'var(--primary)',fontSize:'12px'},children:[((_session$exercises=session.exercises)===null||_session$exercises===void 0?void 0:_session$exercises.length)||0,\" ejercicios\"]})]})},session.session_id);})]}),showLogModal&&/*#__PURE__*/_jsx(LogSessionModal,{workout:workout,dayIndex:activeDay,onClose:()=>setShowLogModal(false),onSaved:()=>{setShowLogModal(false);fetchWorkout();}})]});};const SessionDetailPage=()=>{const{sessionId}=useParams();const navigate=useNavigate();const[session,setSession]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{fetchSession();},[sessionId]);const fetchSession=async()=>{try{const response=await apiFetch(\"/api/sessions/\".concat(sessionId));if(response.ok){const data=await response.json();setSession(data);}}catch(error){console.error(\"Error fetching session:\",error);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})});}if(!session){return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary mb-4\",onClick:()=>navigate(-1),children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Sesi\\xF3n no encontrada\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex flex-col animate-fade-in bg-gray-900 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"page-container flex-1 py-6\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-secondary mb-6\",onClick:()=>navigate(-1),children:\"\\u2190 Volver\"}),session.exercises.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-state py-12\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-gray-400 text-lg\",children:\"No hay ejercicios registrados\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded-xl shadow-xl p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-[#22c55e]\",children:session.day_name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400\",children:session.date}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mt-1\",children:session.workout_name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800 rounded-xl shadow-md overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full table-fixed border-collapse border border-gray-700\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-700 text-gray-200 text-left text-sm uppercase\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 w-2/5\",children:\"Ejercicio\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 w-1/6 text-right\",children:\"Peso (kg)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 w-1/6 text-right\",children:\"Reps\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 w-1/6 text-center\",children:\"Fecha\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-gray-800 divide-y divide-gray-700\",children:session.exercises.map((exercise,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-700 transition-colors\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-2 font-medium break-words\",style:{wordBreak:'break-word',whiteSpace:'normal'},children:[/*#__PURE__*/_jsx(\"div\",{children:exercise.exercise_name}),exercise.notes&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-xs text-gray-400 italic\",style:{lineHeight:'1.2',display:'-webkit-box',WebkitLineClamp:3,WebkitBoxOrient:'vertical',overflow:'hidden'},children:[\"\\uD83D\\uDCDD \",exercise.notes]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 text-right text-[#22c55e] font-semibold\",children:exercise.weight}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 text-right\",children:exercise.reps}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 text-center text-gray-400\",children:session.date})]},index))})]})})]})]})});};// Log Session Modal\nconst LogSessionModal=_ref4=>{var _workout$days4,_day$exercises,_day$exercises2;let{workout,dayIndex,onClose,onSaved}=_ref4;const day=(_workout$days4=workout.days)===null||_workout$days4===void 0?void 0:_workout$days4[dayIndex];const[exercises,setExercises]=useState((day===null||day===void 0?void 0:(_day$exercises=day.exercises)===null||_day$exercises===void 0?void 0:_day$exercises.map((_,i)=>({exercise_index:i,weight:'',reps:'',notes:''})))||[]);const[loading,setLoading]=useState(false);const updateExercise=(index,field,value)=>{const updated=[...exercises];updated[index][field]=value;setExercises(updated);};const handleSubmit=async()=>{setLoading(true);try{const response=await apiFetch(\"/api/sessions\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({workout_id:workout.workout_id,day_index:dayIndex,exercises})});if(response.ok){onSaved();}}catch(error){console.error('Error saving session:',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),\"data-testid\":\"log-session-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"modal-title\",children:day===null||day===void 0?void 0:day.name}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-icon btn-secondary\",onClick:onClose,children:/*#__PURE__*/_jsx(X,{size:20})})]}),day===null||day===void 0?void 0:(_day$exercises2=day.exercises)===null||_day$exercises2===void 0?void 0:_day$exercises2.map((exercise,index)=>{var _exercises$index,_exercises$index2,_exercises$index3;return/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",style:{background:'var(--secondary)'},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontWeight:'600',marginBottom:'8px',color:'var(--foreground)'},children:exercise.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted mb-2\",style:{fontSize:'12px'},children:[\"Objetivo: \",exercise.sets]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Peso (kg)\",value:((_exercises$index=exercises[index])===null||_exercises$index===void 0?void 0:_exercises$index.weight)||'',onChange:e=>updateExercise(index,'weight',e.target.value),style:{flex:1},\"data-testid\":\"log-weight-\".concat(index)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Reps (10,10,8)\",value:((_exercises$index2=exercises[index])===null||_exercises$index2===void 0?void 0:_exercises$index2.reps)||'',onChange:e=>updateExercise(index,'reps',e.target.value),style:{flex:1},\"data-testid\":\"log-reps-\".concat(index)})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input mt-2\",placeholder:\"Notas\",value:((_exercises$index3=exercises[index])===null||_exercises$index3===void 0?void 0:_exercises$index3.notes)||'',onChange:e=>updateExercise(index,'notes',e.target.value)})]},index);}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary w-full\",onClick:handleSubmit,disabled:loading,\"data-testid\":\"save-session-btn\",children:[/*#__PURE__*/_jsx(Save,{size:16}),loading?'Guardando...':'Guardar Sesión']})]})});};// Edit Workout Modal\nconst EditWorkoutModal=_ref5=>{let{workout,onClose,onSaved}=_ref5;const[name,setName]=useState(workout.name);const[description,setDescription]=useState(workout.description||'');const[days,setDays]=useState(workout.days||[]);const[loading,setLoading]=useState(false);const addDay=()=>{setDays([...days,{day_number:days.length+1,name:\"D\\xEDa \".concat(days.length+1),exercises:[]}]);};const updateDayName=(index,newName)=>{const updated=[...days];updated[index].name=newName;setDays(updated);};const addExercise=dayIndex=>{const updated=[...days];updated[dayIndex].exercises.push({name:'',sets:'',notes:''});setDays(updated);};const updateExercise=(dayIndex,exerciseIndex,field,value)=>{const updated=[...days];updated[dayIndex].exercises[exerciseIndex][field]=value;setDays(updated);};const removeExercise=(dayIndex,exerciseIndex)=>{const updated=[...days];updated[dayIndex].exercises.splice(exerciseIndex,1);setDays(updated);};const handleSubmit=async()=>{setLoading(true);try{const response=await apiFetch(\"/api/workouts/\".concat(workout.workout_id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,description,days})});if(response.ok){onSaved();}}catch(error){console.error('Error updating workout:',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),\"data-testid\":\"edit-workout-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"modal-title\",children:\"Editar Rutina\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-icon btn-secondary\",onClick:onClose,children:/*#__PURE__*/_jsx(X,{size:20})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:name,onChange:e=>setName(e.target.value),\"data-testid\":\"edit-workout-name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:description,onChange:e=>setDescription(e.target.value)})]}),days.map((day,dayIndex)=>{var _day$exercises3;return/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",style:{background:'var(--secondary)'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input mb-2\",value:day.name,onChange:e=>updateDayName(dayIndex,e.target.value),style:{fontWeight:'600'}}),(_day$exercises3=day.exercises)===null||_day$exercises3===void 0?void 0:_day$exercises3.map((exercise,exIndex)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',marginBottom:'8px',alignItems:'flex-start'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Ejercicio\",value:exercise.name,onChange:e=>updateExercise(dayIndex,exIndex,'name',e.target.value),style:{marginBottom:'4px'}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'4px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Series\",value:exercise.sets,onChange:e=>updateExercise(dayIndex,exIndex,'sets',e.target.value),style:{flex:1}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Notas\",value:exercise.notes,onChange:e=>updateExercise(dayIndex,exIndex,'notes',e.target.value),style:{flex:1}})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-icon btn-danger\",onClick:()=>removeExercise(dayIndex,exIndex),children:/*#__PURE__*/_jsx(Trash2,{size:16})})]},exIndex)),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-outline w-full\",onClick:()=>addExercise(dayIndex),children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"A\\xF1adir Ejercicio\"]})]},dayIndex);}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary w-full mb-4\",onClick:addDay,children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"A\\xF1adir D\\xEDa\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary w-full\",onClick:handleSubmit,disabled:loading,\"data-testid\":\"update-workout-btn\",children:[/*#__PURE__*/_jsx(Save,{size:16}),loading?'Guardando...':'Actualizar']})]})});};// Progress Page\nconst ProgressPage=()=>{const[progress,setProgress]=useState({});const[loading,setLoading]=useState(true);const[activeWorkoutId,setActiveWorkoutId]=useState(null);useEffect(()=>{fetchProgress();},[]);useEffect(()=>{const ids=Object.keys(progress||{});if(ids.length>0&&!activeWorkoutId){setActiveWorkoutId(ids[0]);}},[progress,activeWorkoutId]);const fetchProgress=async()=>{try{const response=await apiFetch(\"/api/progress\",{});if(response.ok){setProgress(await response.json());}}catch(error){console.error('Error fetching progress:',error);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})});}const workoutIds=Object.keys(progress).sort((a,b)=>progress[b].sessions_count-progress[a].sessions_count);return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container animate-fade-in\",\"data-testid\":\"progress-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"header-title\",children:\"Progreso\"}),/*#__PURE__*/_jsx(TrendingUp,{size:32,color:\"var(--primary)\"})]}),workoutIds.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'8px',overflowX:'auto',marginBottom:'16px',paddingBottom:'4px'},children:workoutIds.map(id=>{const isActive=id===activeWorkoutId;const workout=progress[id];return/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveWorkoutId(id),style:{padding:'8px 14px',borderRadius:'999px',fontSize:'13px',fontWeight:600,whiteSpace:'nowrap',border:isActive?'1px solid var(--primary)':'1px solid var(--border)',background:isActive?'rgba(34,197,94,0.15)':'var(--secondary)',color:'var(--foreground)',cursor:'pointer'},children:workout.workout_name},id);})}),workoutIds.length===0||!activeWorkoutId?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(Activity,{className:\"empty-icon\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"empty-title\",children:\"Sin datos\"}),/*#__PURE__*/_jsx(\"p\",{className:\"empty-desc\",children:\"Registra sesiones para ver tu progreso\"})]}):workoutIds.filter(id=>id===activeWorkoutId).map(workoutId=>{const data=progress[workoutId];const exerciseIds=Object.keys(data.exercises||{});return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{style:{fontSize:'18px',marginBottom:'16px',color:'var(--foreground)'},children:[data.workout_name,/*#__PURE__*/_jsxs(\"span\",{className:\"text-muted\",style:{fontSize:'14px',marginLeft:'8px'},children:[\"(\",data.sessions_count,\" sesiones)\"]})]}),exerciseIds.slice(0,100).map(exIdx=>{var _exerciseData$;const exerciseData=data.exercises[exIdx];const chartData=exerciseData.sort((a,b)=>new Date(a.date)-new Date(b.date)).map(d=>({date:d.date.split('-').slice(1).join('/'),peso:d.weight}));// Tomamos el nombre del primer registro del ejercicio (ya que todos los registros son del mismo ejercicio)\nconst exerciseName=((_exerciseData$=exerciseData[0])===null||_exerciseData$===void 0?void 0:_exerciseData$.exercise_name)||\"Ejercicio \".concat(parseInt(exIdx)+1);return/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"chart-title\",children:exerciseName}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:150,children:/*#__PURE__*/_jsxs(LineChart,{data:chartData,children:[/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\",stroke:\"var(--muted-foreground)\",fontSize:10}),/*#__PURE__*/_jsx(YAxis,{stroke:\"var(--muted-foreground)\",fontSize:10,width:30}),/*#__PURE__*/_jsx(Tooltip,{contentStyle:{background:'var(--card)',border:'1px solid var(--border)',borderRadius:'8px'}}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"peso\",stroke:\"var(--primary)\",strokeWidth:2,dot:{fill:'var(--primary)',strokeWidth:0}})]})})]},exIdx);})]},workoutId);})]});};const CreateWorkoutPage=()=>{const navigate=useNavigate();const[name,setName]=useState('');const[description,setDescription]=useState('');const[days,setDays]=useState([{day_number:1,name:'Día 1',exercises:[]}]);const[loading,setLoading]=useState(false);const addDay=()=>setDays([...days,{day_number:days.length+1,name:\"D\\xEDa \".concat(days.length+1),exercises:[]}]);const addExercise=dayIndex=>{const updated=[...days];updated[dayIndex].exercises.push({name:'',sets:'',notes:''});setDays(updated);};const updateDayName=(index,newName)=>{const updated=[...days];updated[index].name=newName;setDays(updated);};const updateExercise=(dayIndex,exIndex,field,value)=>{const updated=[...days];updated[dayIndex].exercises[exIndex][field]=value;setDays(updated);};const removeExercise=(dayIndex,exIndex)=>{const updated=[...days];updated[dayIndex].exercises.splice(exIndex,1);setDays(updated);};const handleSubmit=async()=>{if(!name.trim())return;setLoading(true);try{const response=await apiFetch(\"/api/workouts\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,description,days})});if(response.ok)navigate('/dashboard');}catch(error){console.error(error);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container animate-fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-secondary mb-2\",onClick:()=>navigate(-1),children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"header-title\",children:\"Nueva Rutina\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:description,onChange:e=>setDescription(e.target.value)})]}),days.map((day,dayIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",style:{background:'var(--secondary)'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input mb-2\",value:day.name,onChange:e=>updateDayName(dayIndex,e.target.value),style:{fontWeight:'600'}}),day.exercises.map((ex,exIndex)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',marginBottom:'8px',alignItems:'flex-start'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Ejercicio\",value:ex.name,onChange:e=>updateExercise(dayIndex,exIndex,'name',e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Series\",value:ex.sets,onChange:e=>updateExercise(dayIndex,exIndex,'sets',e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Notas\",value:ex.notes,onChange:e=>updateExercise(dayIndex,exIndex,'notes',e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-icon btn-danger\",onClick:()=>removeExercise(dayIndex,exIndex),children:\"X\"})]},exIndex)),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline w-full\",onClick:()=>addExercise(dayIndex),children:\"A\\xF1adir Ejercicio\"})]},dayIndex)),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary w-full mb-4\",onClick:addDay,children:\"A\\xF1adir D\\xEDa\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary w-full\",onClick:handleSubmit,disabled:loading,children:loading?'Guardando...':'Guardar Rutina'})]})]});};const LogSessionPage=()=>{//const { workoutId, dayIndexLog } = useParams();\nconst pathParts=window.location.pathname.split('/');const workoutId=pathParts[2];const dayIndexLog=pathParts[4];console.log({workoutId,dayIndexLog});const[dayIndex,setDayIndex]=useState(0);const parsedDayIndex=parseInt(dayIndexLog||0);const navigate=useNavigate();const[workout,setWorkout]=useState(null);const[exercises,setExercises]=useState([]);const[loading,setLoading]=useState(true);const[lastSession,setLastSession]=useState(null);const[saving,setSaving]=useState(false);useEffect(()=>{const fetchWorkout=async()=>{const res=await apiFetch(\"/api/workouts/\".concat(workoutId));if(res.ok){const data=await res.json();setWorkout(data);setExercises(data.days[parsedDayIndex].exercises.map((_,i)=>({exercise_index:i,weight:'',reps:'',notes:''})));}setLoading(false);};fetchWorkout();fetchLastSession();},[workoutId,parsedDayIndex]);const updateExercise=(index,field,value)=>{const updated=[...exercises];updated[index][field]=value;setExercises(updated);};const fetchLastSession=async()=>{try{const response=await apiFetch(\"/api/sessions/last/\".concat(workoutId,\"/\").concat(dayIndexLog));if(response.ok){const data=await response.json();setLastSession(data);}}catch(error){console.error(\"Error fetching last session:\",error);}};const getProgressData=(exerciseIndex,currentWeight,currentReps)=>{if(!(lastSession!==null&&lastSession!==void 0&&lastSession.exercises))return null;const previous=lastSession.exercises.find(ex=>ex.exercise_index===exerciseIndex);if(!previous)return null;const prevWeight=parseFloat(previous.weight||0);const prevReps=parseInt(previous.reps||0);const weight=parseFloat(currentWeight||0);const reps=parseInt(currentReps||0);const weightDiff=weight-prevWeight;const repsDiff=reps-prevReps;let color=\"var(--muted)\";if(weightDiff>0||weightDiff===0&&repsDiff>0){color=\"#22c55e\";// verde\n}else if(weightDiff<0||weightDiff===0&&repsDiff<0){color=\"#ef4444\";// rojo\n}return{previous,weightDiff,repsDiff,color};};const handleSubmit=async()=>{if(saving)return;setSaving(true);try{const response=await apiFetch(\"/api/sessions\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({workout_id:workout.workout_id,day_index:parsedDayIndex,exercises})});if(response.ok){navigate(\"/workout/\".concat(workoutId));}else{setSaving(false);}}catch(error){console.error(error);setSaving(false);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})});if(!workout)return/*#__PURE__*/_jsx(\"div\",{className:\"page-container\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Workout no encontrado\"})});const day=workout.days[parsedDayIndex];return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container animate-fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-secondary mb-2\",onClick:()=>navigate(-1),children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"header-title\",children:day.name})]}),day.exercises.map((exercise,index)=>{var _lastSession$exercise;const previous=lastSession===null||lastSession===void 0?void 0:(_lastSession$exercise=lastSession.exercises)===null||_lastSession$exercise===void 0?void 0:_lastSession$exercise.find(ex=>ex.exercise_index===index);const current=exercises[index]||{weight:'',reps:'',notes:''};const progress=getProgressData(index,current.weight,current.reps);return/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",style:{background:'var(--secondary)'},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontWeight:'600',marginBottom:'8px',color:'var(--foreground)'},children:exercise.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted mb-2\",style:{fontSize:'12px'},children:[\"Objetivo: \",exercise.sets]}),previous?/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'12px',color:'var(--primary)'},children:[\"\\xDAltima vez: \",previous.weight,\"kg x \",previous.reps]}):/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'13px',color:'rgba(255, 255, 255, 0.85)',fontWeight:500,textShadow:'0 0 2px rgba(0,0,0,0.6)'},children:\"Primera vez \\uD83D\\uDCAA\"}),(previous===null||previous===void 0?void 0:previous.notes)&&previous.notes.trim()!==\"\"&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'6px',padding:'8px 10px',borderRadius:'8px',background:'rgba(34,197,94,0.08)',border:'1px solid rgba(34,197,94,0.25)',fontSize:'12px',color:'rgba(255,255,255,0.85)',lineHeight:'1.25'},children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.8},children:\"\\uD83D\\uDCDD \\xDAltima nota:\"}),' ',/*#__PURE__*/_jsx(\"span\",{style:{fontStyle:'italic'},children:previous.notes})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",inputMode:\"decimal\",className:\"input\",placeholder:\"Peso (kg)\",value:current.weight,onChange:e=>updateExercise(index,'weight',e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",inputMode:\"decimal\",className:\"input\",placeholder:\"Reps\",value:current.reps,onChange:e=>updateExercise(index,'reps',e.target.value)})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input mt-2\",placeholder:\"Notas\",value:current.notes,onChange:e=>updateExercise(index,'notes',e.target.value)}),progress&&current.weight&&current.reps&&/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'12px',marginTop:'4px',color:progress.color,fontWeight:'600'},children:[progress.weightDiff>0&&\"+\".concat(progress.weightDiff,\"kg \"),progress.weightDiff<0&&\"\".concat(progress.weightDiff,\"kg \"),progress.repsDiff>0&&\"+\".concat(progress.repsDiff,\" reps\"),progress.repsDiff<0&&\"\".concat(progress.repsDiff,\" reps\"),progress.weightDiff===0&&progress.repsDiff===0&&\"Igual que la última sesión\"]})]},index);}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary w-full\",onClick:handleSubmit,disabled:saving,children:saving?/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",style:{width:'20px',height:'20px'}}):\"Guardar Sesión\"})]});};// Calendar Page\nconst CalendarPage=()=>{const[sessions,setSessions]=useState([]);const[loading,setLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{fetchSessions();},[]);const fetchSessions=async()=>{try{const response=await apiFetch(\"/api/sessions\",{});if(response.ok){setSessions(await response.json());}}catch(error){console.error('Error fetching sessions:',error);}finally{setLoading(false);}};// Group sessions by date\nconst sessionsByDate=sessions.reduce((acc,session)=>{const date=session.date;if(!acc[date])acc[date]=[];acc[date].push(session);return acc;},{});const dates=Object.keys(sessionsByDate).sort().reverse();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container animate-fade-in\",\"data-testid\":\"calendar-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"header-title\",children:\"Historial\"}),/*#__PURE__*/_jsx(Calendar,{size:32,color:\"var(--primary)\"})]}),dates.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"empty-icon\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"empty-title\",children:\"Sin sesiones\"}),/*#__PURE__*/_jsx(\"p\",{className:\"empty-desc\",children:\"Registra tu primera sesi\\xF3n de entrenamiento\"})]}):dates.map(date=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'14px',color:'var(--muted-foreground)',marginBottom:'8px'},children:new Date(date+'T00:00:00').toLocaleDateString('es-ES',{weekday:'long',year:'numeric',month:'long',day:'numeric'})}),sessionsByDate[date].map(session=>{var _session$exercises2;return/*#__PURE__*/_jsx(\"div\",{className:\"card mb-2\",style:{padding:'12px',cursor:'pointer'},onClick:()=>{navigate(\"/session/\".concat(session.session_id));},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{fontWeight:'600',color:'var(--foreground)'},children:session.workout_name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",style:{fontSize:'12px'},children:session.day_name})]}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'var(--primary)',fontSize:'14px',fontWeight:'600'},children:[((_session$exercises2=session.exercises)===null||_session$exercises2===void 0?void 0:_session$exercises2.length)||0,\" ejercicios\"]})]})},session.session_id);})]},date))]});};const EditWorkoutPage=()=>{const{workoutId}=useParams();const navigate=useNavigate();const[loading,setLoading]=useState(true);const[name,setName]=useState('');const[description,setDescription]=useState('');const[days,setDays]=useState([]);useEffect(()=>{fetchWorkout();},[workoutId]);const fetchWorkout=async()=>{try{const response=await apiFetch(\"/api/workouts/\".concat(workoutId));if(response.ok){const data=await response.json();setName(data.name);setDescription(data.description||'');setDays(data.days||[]);}}catch(error){console.error(\"Error fetching workout:\",error);}finally{setLoading(false);}};const addDay=()=>{setDays([...days,{day_number:days.length+1,name:\"D\\xEDa \".concat(days.length+1),exercises:[]}]);};const updateDayName=(index,value)=>{const updated=[...days];updated[index].name=value;setDays(updated);};const addExercise=dayIndex=>{const updated=[...days];updated[dayIndex].exercises.push({name:'',sets:'',notes:''});setDays(updated);};const updateExercise=(dayIndex,exIndex,field,value)=>{const updated=[...days];updated[dayIndex].exercises[exIndex][field]=value;setDays(updated);};const removeExercise=(dayIndex,exIndex)=>{const updated=[...days];updated[dayIndex].exercises.splice(exIndex,1);setDays(updated);};const handleSubmit=async()=>{try{const response=await apiFetch(\"/api/workouts/\".concat(workoutId),{method:'PUT',body:JSON.stringify({name,description,days})});if(response.ok){navigate(\"/workout/\".concat(workoutId));}}catch(error){console.error(\"Error updating workout:\",error);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container animate-fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-secondary mb-2\",onClick:()=>navigate(-1),children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"header-title\",children:\"Editar Rutina\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:description,onChange:e=>setDescription(e.target.value)})]}),days.map((day,dayIndex)=>{var _day$exercises4;return/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",style:{background:'var(--secondary)'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input mb-2\",value:day.name,onChange:e=>updateDayName(dayIndex,e.target.value),style:{fontWeight:'600'}}),(_day$exercises4=day.exercises)===null||_day$exercises4===void 0?void 0:_day$exercises4.map((exercise,exIndex)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',marginBottom:'8px',alignItems:'flex-start'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Ejercicio\",value:exercise.name,onChange:e=>updateExercise(dayIndex,exIndex,'name',e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Series\",value:exercise.sets,onChange:e=>updateExercise(dayIndex,exIndex,'sets',e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"Notas\",value:exercise.notes,onChange:e=>updateExercise(dayIndex,exIndex,'notes',e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-icon btn-danger\",onClick:()=>removeExercise(dayIndex,exIndex),children:/*#__PURE__*/_jsx(Trash2,{size:16})})]},exIndex)),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline w-full\",onClick:()=>addExercise(dayIndex),children:\"A\\xF1adir Ejercicio\"})]},dayIndex);}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary w-full mb-4\",onClick:addDay,children:\"A\\xF1adir D\\xEDa\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary w-full\",onClick:handleSubmit,children:\"Actualizar Rutina\"})]})]});};// Profile Page\nconst ProfilePage=()=>{var _user$name2;const{user,logout}=useAuth();const navigate=useNavigate();const handleLogout=async()=>{await logout();navigate('/login');};return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container animate-fade-in\",\"data-testid\":\"profile-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"header-title\",children:\"Perfil\"}),/*#__PURE__*/_jsx(User,{size:32,color:\"var(--primary)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{textAlign:'center',padding:'32px'},children:[user!==null&&user!==void 0&&user.picture?/*#__PURE__*/_jsx(\"img\",{src:user.picture,alt:user.name,style:{width:'80px',height:'80px',borderRadius:'50%',margin:'0 auto 16px'}}):/*#__PURE__*/_jsx(\"div\",{style:{width:'80px',height:'80px',borderRadius:'50%',background:'var(--primary)',display:'flex',alignItems:'center',justifyContent:'center',margin:'0 auto 16px',fontSize:'32px',fontWeight:'700',color:'var(--primary-foreground)'},children:(user===null||user===void 0?void 0:(_user$name2=user.name)===null||_user$name2===void 0?void 0:_user$name2.charAt(0).toUpperCase())||'U'}),/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'24px',marginBottom:'4px',color:'var(--foreground)'},children:(user===null||user===void 0?void 0:user.name)||'Usuario'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:user===null||user===void 0?void 0:user.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-4\",children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"16px\",marginBottom:\"16px\",color:\"var(--foreground)\"},children:\"DragonFit\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"18px\",fontWeight:\"700\",textAlign:\"center\",marginBottom:\"12px\",letterSpacing:\"0.5px\"},children:\"From Bodybuilders to Bodybuilders\"}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"13px\",textAlign:\"center\",color:\"var(--muted-foreground)\",marginBottom:\"20px\"},children:[\"credits by\",\" \",/*#__PURE__*/_jsx(\"a\",{href:\"https://instagram.com/mikel_lontso\",target:\"_blank\",rel:\"noopener noreferrer\",style:{fontWeight:\"600\"},children:\"@mikel_lontso\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",fontSize:\"14px\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:\"8px\"},children:/*#__PURE__*/_jsx(\"a\",{href:\"/privacy\",style:{fontWeight:\"500\"},children:\"Pol\\xEDtica de privacidad\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://lontsofitness.netlify.app/\",target:\"_blank\",rel:\"noopener noreferrer\",style:{fontWeight:\"500\"},children:\"Visitar web oficial\"})})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-danger w-full mt-4\",onClick:handleLogout,\"data-testid\":\"logout-btn\",children:[/*#__PURE__*/_jsx(LogOut,{size:18}),\"Cerrar Sesi\\xF3n\"]})]});};// Bottom Navigation\nconst BottomNav=()=>{const location=useLocation();const path=location.pathname;return/*#__PURE__*/_jsxs(\"nav\",{className:\"bottom-nav\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/dashboard\",className:\"nav-item \".concat(path==='/dashboard'?'active':''),\"data-testid\":\"nav-dashboard\",children:[/*#__PURE__*/_jsx(Dumbbell,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Rutinas\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/progress\",className:\"nav-item \".concat(path==='/progress'?'active':''),\"data-testid\":\"nav-progress\",children:[/*#__PURE__*/_jsx(TrendingUp,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Progreso\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/calendar\",className:\"nav-item \".concat(path==='/calendar'?'active':''),\"data-testid\":\"nav-calendar\",children:[/*#__PURE__*/_jsx(Calendar,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Historial\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/profile\",className:\"nav-item \".concat(path==='/profile'?'active':''),\"data-testid\":\"nav-profile\",children:[/*#__PURE__*/_jsx(User,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Perfil\"})]})]});};// useParams hook for workout detail\nconst useParams=()=>{const location=useLocation();const path=location.pathname;// Buscar workoutId\nconst workoutMatch=path.match(/\\/workout\\/([^/]+)/);if(workoutMatch){return{workoutId:workoutMatch[1]};}// Buscar sessionId\nconst sessionMatch=path.match(/\\/session\\/([^/]+)/);if(sessionMatch){return{sessionId:sessionMatch[1]};}// Ninguno encontrado\nreturn{};};// Main App Router\nconst AppRouter=()=>{var _location$hash;const location=useLocation();// Check for session_id in URL hash (OAuth callback)\nif((_location$hash=location.hash)!==null&&_location$hash!==void 0&&_location$hash.includes('session_id=')){return/*#__PURE__*/_jsx(AuthCallback,{});}return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/privacy\",element:/*#__PURE__*/_jsx(PrivacyPolicyPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{children:[/*#__PURE__*/_jsx(DashboardPage,{}),/*#__PURE__*/_jsx(BottomNav,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/progress\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{children:[/*#__PURE__*/_jsx(ProgressPage,{}),/*#__PURE__*/_jsx(BottomNav,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/calendar\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{children:[/*#__PURE__*/_jsx(CalendarPage,{}),/*#__PURE__*/_jsx(BottomNav,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{children:[/*#__PURE__*/_jsx(ProfilePage,{}),/*#__PURE__*/_jsx(BottomNav,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/session/:sessionId\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{children:[/*#__PURE__*/_jsx(SessionDetailPage,{}),/*#__PURE__*/_jsx(BottomNav,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/workout/create\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{children:[/*#__PURE__*/_jsx(CreateWorkoutPage,{}),/*#__PURE__*/_jsx(BottomNav,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/workout/:workoutId/log/:dayIndexLog\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{children:[/*#__PURE__*/_jsx(LogSessionPage,{}),/*#__PURE__*/_jsx(BottomNav,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/workout/:workoutId/edit\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{children:[/*#__PURE__*/_jsx(EditWorkoutPage,{}),/*#__PURE__*/_jsx(BottomNav,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/workout/:workoutId\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{children:[/*#__PURE__*/_jsx(WorkoutDetailPage,{}),/*#__PURE__*/_jsx(BottomNav,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})})]});};// Main App\nfunction App(){return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:/*#__PURE__*/_jsx(AppRouter,{})})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","createContext","useContext","BrowserRouter","Routes","Route","Navigate","useNavigate","useLocation","Link","LineChart","Line","XAxis","YAxis","Tooltip","ResponsiveContainer","Dumbbell","Activity","Calendar","User","TrendingUp","Plus","Save","LogOut","ChevronRight","X","Trash2","Edit","Download","FileSpreadsheet","FileText","Play","PrivacyPolicyPage","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_BACKEND_URL","apiFetch","endpoint","options","arguments","length","undefined","token","localStorage","getItem","headers","_objectSpread","concat","fetch","AuthContext","useAuth","AuthProvider","_ref","children","user","setUser","loading","setLoading","checkAuth","response","ok","userData","json","error","console","login","setItem","logout","removeItem","Provider","value","ProtectedRoute","_ref2","location","className","style","minHeight","to","state","from","replace","AuthCallback","navigate","hasProcessed","current","processAuth","hash","window","sessionIdMatch","match","sessionId","method","body","JSON","stringify","session_id","data","LoginPage","isLogin","setIsLogin","email","setEmail","password","setPassword","name","setName","acceptedPrivacy","setAcceptedPrivacy","setError","handleSubmit","e","preventDefault","Error","detail","err","message","handleGoogleLogin","redirectUrl","origin","href","encodeURIComponent","src","alt","onSubmit","type","placeholder","onChange","target","required","display","alignItems","gap","marginBottom","fontSize","checked","marginTop","color","fontWeight","disabled","onClick","DashboardPage","_user$name","workouts","setWorkouts","stats","setStats","showCreateModal","setShowCreateModal","fetchData","workoutsRes","statsRes","Promise","all","split","total_workouts","total_sessions","sessions_this_week","Math","round","total_volume","size","map","workout","_workout$days","workout_id","days","description","textTransform","CreateWorkoutModal","onClose","onCreated","_ref3","setDescription","setDays","day_number","exercises","addDay","updateDayName","index","newName","updated","addExercise","dayIndex","push","sets","notes","updateExercise","exerciseIndex","field","removeExercise","splice","trim","stopPropagation","day","background","exercise","exIndex","flex","WorkoutDetailPage","_workout$days2","_workout$days3","_currentDay$exercises","setWorkout","sessions","setSessions","activeDay","setActiveDay","showLogModal","setShowLogModal","showEditModal","setShowEditModal","workoutId","useParams","fetchWorkout","workoutRes","sessionsRes","handleDelete","confirm","handleExport","format","blob","url","URL","createObjectURL","a","document","createElement","download","click","revokeObjectURL","currentDay","slice","session","_session$exercises","padding","cursor","log","justifyContent","day_name","date","LogSessionModal","onSaved","SessionDetailPage","setSession","fetchSession","workout_name","wordBreak","whiteSpace","exercise_name","lineHeight","WebkitLineClamp","WebkitBoxOrient","overflow","weight","reps","_ref4","_workout$days4","_day$exercises","_day$exercises2","setExercises","_","i","exercise_index","day_index","_exercises$index","_exercises$index2","_exercises$index3","EditWorkoutModal","_ref5","_day$exercises3","ProgressPage","progress","setProgress","activeWorkoutId","setActiveWorkoutId","fetchProgress","ids","Object","keys","workoutIds","sort","b","sessions_count","overflowX","paddingBottom","id","isActive","borderRadius","border","filter","exerciseIds","marginLeft","exIdx","_exerciseData$","exerciseData","chartData","Date","d","join","peso","exerciseName","parseInt","width","height","dataKey","stroke","contentStyle","strokeWidth","dot","fill","CreateWorkoutPage","ex","LogSessionPage","pathParts","pathname","dayIndexLog","setDayIndex","parsedDayIndex","lastSession","setLastSession","saving","setSaving","res","fetchLastSession","getProgressData","currentWeight","currentReps","previous","find","prevWeight","parseFloat","prevReps","weightDiff","repsDiff","_lastSession$exercise","textShadow","opacity","fontStyle","inputMode","CalendarPage","fetchSessions","sessionsByDate","reduce","acc","dates","reverse","toLocaleDateString","weekday","year","month","_session$exercises2","EditWorkoutPage","_day$exercises4","ProfilePage","_user$name2","handleLogout","textAlign","picture","margin","charAt","toUpperCase","letterSpacing","rel","BottomNav","path","workoutMatch","sessionMatch","AppRouter","_location$hash","includes","element","App"],"sources":["/Users/mikelnietoirureta/Documents/CODE/PrepCoachWeb/dragon-fit/dragon-fit/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, createContext, useContext } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate, useNavigate, useLocation, Link } from 'react-router-dom';\nimport { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer } from 'recharts';\nimport { \n  Dumbbell, Activity, Calendar, User, TrendingUp, Plus, \n  Save, LogOut, ChevronRight, X, Trash2, Edit, Download,\n  FileSpreadsheet, FileText, Play\n} from 'lucide-react';\nimport './App.css';\nimport PrivacyPolicyPage from \"./pages/PrivacyPolicyPage\";\n\nconst API_URL = process.env.REACT_APP_BACKEND_URL || 'https://dragon-fit.vercel.app';\n\n// ==============================\n// JWT AUTH HELPER (PWA SAFE)\n// ==============================\nconst apiFetch = async (endpoint, options = {}) => {\n  const token = localStorage.getItem(\"token\");\n\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    ...(options.headers || {}),\n  };\n\n  if (token) {\n    headers[\"Authorization\"] = `Bearer ${token}`;\n  }\n\n  return fetch(`${API_URL}${endpoint}`, {\n    ...options,\n    headers,\n  });\n};\n\n\n// Auth Context\nconst AuthContext = createContext(null);\n\nconst useAuth = () => useContext(AuthContext);\n\nconst AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    checkAuth();\n  }, []);\n\n  const checkAuth = async () => {\n  try {\n    const response = await apiFetch(\"/api/auth/me\");\n\n    if (response.ok) {\n      const userData = await response.json();\n      setUser(userData);\n    }\n  } catch (error) {\n    console.error(\"Auth check failed:\", error);\n  } finally {\n    setLoading(false);\n  }\n};\n\n\n  const login = (userData, token) => {\n    setUser(userData);\n    if (token) {\n      localStorage.setItem('token', token);\n    }\n  };\n\n  const logout = async () => {\n    localStorage.removeItem('token');\n    setUser(null);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, loading, login, logout, checkAuth }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\n// Protected Route\nconst ProtectedRoute = ({ children }) => {\n  const { user, loading } = useAuth();\n  const location = useLocation();\n\n  if (loading) {\n    return (\n      <div className=\"loading\" style={{ minHeight: '100vh' }}>\n        <div className=\"loading-spinner\"></div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  return children;\n};\n\n// Auth Callback Component\nconst AuthCallback = () => {\n  const navigate = useNavigate();\n  const { login } = useAuth();\n  const hasProcessed = useRef(false);\n\n  useEffect(() => {\n    if (hasProcessed.current) return;\n    hasProcessed.current = true;\n\n    const processAuth = async () => {\n      const hash = window.location.hash;\n      const sessionIdMatch = hash.match(/session_id=([^&]+)/);\n      \n      if (sessionIdMatch) {\n        const sessionId = sessionIdMatch[1];\n        try {\n          const response = await apiFetch(\"/api/auth/session\", {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ session_id: sessionId })\n          });\n\n          if (response.ok) {\n            const data = await response.json();\n            login(data.user, data.token);\n            navigate('/dashboard', { replace: true });\n            return;\n          }\n        } catch (error) {\n          console.error('Auth callback error:', error);\n        }\n      }\n      navigate('/login', { replace: true });\n    };\n\n    processAuth();\n  }, [navigate, login]);\n\n  return (\n    <div className=\"loading\" style={{ minHeight: '100vh' }}>\n      <div className=\"loading-spinner\"></div>\n    </div>\n  );\n};\n\n// Login Page\nconst LoginPage = () => {\n  const [isLogin, setIsLogin] = useState(true);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [acceptedPrivacy, setAcceptedPrivacy] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const { login } = useAuth();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n\n    // ✅ Validación extra en registro\n    if (!isLogin && !acceptedPrivacy) {\n      setError(\"Debes aceptar la Política de Privacidad para registrarte.\");\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const endpoint = isLogin ? \"/api/auth/login\" : \"/api/auth/register\";\n      const body = isLogin ? { email, password } : { email, password, name };\n\n      const response = await apiFetch(`${endpoint}`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(body),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.detail || \"Error de autenticación\");\n      }\n\n      login(data.user, data.token);\n      navigate(\"/dashboard\", { replace: true });\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGoogleLogin = () => {\n    const redirectUrl = window.location.origin + \"/dashboard\";\n    window.location.href = `https://auth.emergentagent.com/?redirect=${encodeURIComponent(\n      redirectUrl\n    )}`;\n  };\n\n  return (\n    <div className=\"auth-page\" data-testid=\"login-page\">\n      <img src=\"/dragon-logo.png\" alt=\"DragonFit\" className=\"auth-logo\" />\n      <h1 className=\"auth-title neon-text\">DragonFit</h1>\n      <p className=\"auth-subtitle\">Tu compañero de entrenamiento</p>\n\n      <div className=\"auth-form\">\n        <form onSubmit={handleSubmit}>\n          {!isLogin && (\n            <div className=\"input-group\">\n              <label className=\"input-label\">Nombre</label>\n              <input\n                type=\"text\"\n                className=\"input\"\n                placeholder=\"Tu nombre\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                required={!isLogin}\n                data-testid=\"register-name-input\"\n              />\n            </div>\n          )}\n\n          <div className=\"input-group\">\n            <label className=\"input-label\">Email</label>\n            <input\n              type=\"email\"\n              className=\"input\"\n              placeholder=\"tu@email.com\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n              data-testid=\"email-input\"\n            />\n          </div>\n\n          <div className=\"input-group\">\n            <label className=\"input-label\">Contraseña</label>\n            <input\n              type=\"password\"\n              className=\"input\"\n              placeholder=\"••••••••\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n              data-testid=\"password-input\"\n            />\n          </div>\n\n          {/* ✅ Checkbox solo en registro */}\n          {!isLogin && (\n            <div\n              style={{\n                display: \"flex\",\n                alignItems: \"flex-start\",\n                gap: \"8px\",\n                marginBottom: \"16px\",\n                fontSize: \"13px\",\n              }}\n            >\n              <input\n                type=\"checkbox\"\n                checked={acceptedPrivacy}\n                onChange={(e) => setAcceptedPrivacy(e.target.checked)}\n                style={{ marginTop: \"3px\" }}\n                data-testid=\"privacy-checkbox\"\n              />\n              <span style={{ color: \"var(--muted-foreground)\" }}>\n                He leído y acepto la{\" \"}\n                <Link\n                  to=\"/privacy\"\n                  target=\"_blank\"\n                  style={{ fontWeight: 600 }}\n                >\n                  Política de Privacidad\n                </Link>\n              </span>\n            </div>\n          )}\n\n          {error && (\n            <p\n              style={{\n                color: \"var(--destructive)\",\n                fontSize: \"14px\",\n                marginBottom: \"16px\",\n              }}\n            >\n              {error}\n            </p>\n          )}\n\n          <button\n            type=\"submit\"\n            className=\"btn btn-primary w-full\"\n            disabled={loading}\n            data-testid=\"submit-button\"\n          >\n            {loading\n              ? \"Cargando...\"\n              : isLogin\n              ? \"Iniciar Sesión\"\n              : \"Registrarse\"}\n          </button>\n        </form>\n\n        <div className=\"auth-divider\">o</div>\n\n        <button\n          className=\"btn btn-secondary w-full\"\n          onClick={handleGoogleLogin}\n          data-testid=\"google-login-button\"\n        >\n          Continuar con Google\n        </button>\n\n        <p className=\"auth-switch\">\n          {isLogin ? \"¿No tienes cuenta? \" : \"¿Ya tienes cuenta? \"}\n          <a\n            href=\"#\"\n            onClick={(e) => {\n              e.preventDefault();\n              setIsLogin(!isLogin);\n            }}\n          >\n            {isLogin ? \"Regístrate\" : \"Inicia Sesión\"}\n          </a>\n        </p>\n      </div>\n    </div>\n  );\n};\n\n// Dashboard Page\nconst DashboardPage = () => {\n  const [workouts, setWorkouts] = useState([]);\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const { user } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = async () => {\n    try {\n      const [workoutsRes, statsRes] = await Promise.all([\n        apiFetch(\"/api/workouts\", { }),\n        apiFetch(\"/api/stats\", { })\n      ]);\n\n      if (workoutsRes.ok) setWorkouts(await workoutsRes.json());\n      if (statsRes.ok) setStats(await statsRes.json());\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading\">\n        <div className=\"loading-spinner\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"page-container animate-fade-in\" data-testid=\"dashboard-page\">\n      <div className=\"header\">\n        <div>\n          <p className=\"text-muted\" style={{ fontSize: '14px', marginBottom: '4px' }}>\n            Hola, {user?.name?.split(' ')[0] || 'Atleta'}\n          </p>\n          <h1 className=\"header-title\">Dashboard</h1>\n        </div>\n        <img src=\"/dragon-logo.png\" alt=\"DragonFit\" className=\"header-logo\" />\n      </div>\n\n      <div className=\"stats-grid\">\n        <div className=\"stat-card\">\n          <div className=\"stat-value\">{stats?.total_workouts || 0}</div>\n          <div className=\"stat-label\">Rutinas</div>\n        </div>\n        <div className=\"stat-card\">\n          <div className=\"stat-value\">{stats?.total_sessions || 0}</div>\n          <div className=\"stat-label\">Sesiones</div>\n        </div>\n        <div className=\"stat-card\">\n          <div className=\"stat-value\">{stats?.sessions_this_week || 0}</div>\n          <div className=\"stat-label\">Esta Semana</div>\n        </div>\n        <div className=\"stat-card\">\n          <div className=\"stat-value\">{Math.round((stats?.total_volume || 0) / 1000)}k</div>\n          <div className=\"stat-label\">Volumen (kg)</div>\n        </div>\n      </div>\n\n      <div className=\"flex items-center justify-between mb-4\">\n        <h2 style={{ fontSize: '20px', color: 'var(--foreground)' }}>Mis Rutinas</h2>\n      </div>\n\n      {workouts.length === 0 ? (\n        <div className=\"empty-state\">\n          <Dumbbell className=\"empty-icon\" />\n          <h3 className=\"empty-title\">Sin Rutinas</h3>\n          <p className=\"empty-desc\">Crea tu primera rutina de entrenamiento</p>\n          <button \n            className=\"btn btn-primary\"\n            onClick={() => setShowCreateModal(true)}\n            data-testid=\"create-first-workout-btn\"\n          >\n            <Plus size={20} />\n            Crear Rutina\n          </button>\n        </div>\n      ) : (\n        workouts.map((workout) => (\n          <div \n            key={workout.workout_id}\n            className=\"workout-card\"\n            onClick={() => navigate(`/workout/${workout.workout_id}`)}\n            data-testid={`workout-card-${workout.workout_id}`}\n          >\n            <div className=\"workout-card-header\">\n              <h3 className=\"workout-card-title\">{workout.name}</h3>\n              <span className=\"workout-card-days\">{workout.days?.length || 0} días</span>\n            </div>\n            {workout.description && (\n              <p className=\"workout-card-desc\">{workout.description}</p>\n            )}\n            <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginTop: '12px', color: 'var(--primary)' }}>\n              <ChevronRight size={16} />\n              <span style={{ fontSize: '12px', fontWeight: '600', textTransform: 'uppercase' }}>Ver detalles</span>\n            </div>\n          </div>\n        ))\n      )}\n\n      <button className=\"fab\" onClick={() => navigate('/workout/create')}>\n        <Plus size={24} />\n      </button>\n\n      {showCreateModal && (\n        <CreateWorkoutModal \n          onClose={() => setShowCreateModal(false)}\n          onCreated={() => {\n            setShowCreateModal(false);\n            fetchData();\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\n// Create Workout Modal\nconst CreateWorkoutModal = ({ onClose, onCreated }) => {\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [days, setDays] = useState([{ day_number: 1, name: 'Día 1', exercises: [] }]);\n  const [loading, setLoading] = useState(false);\n\n  const addDay = () => {\n    setDays([...days, { \n      day_number: days.length + 1, \n      name: `Día ${days.length + 1}`, \n      exercises: [] \n    }]);\n  };\n\n  const updateDayName = (index, newName) => {\n    const updated = [...days];\n    updated[index].name = newName;\n    setDays(updated);\n  };\n\n  const addExercise = (dayIndex) => {\n    const updated = [...days];\n    updated[dayIndex].exercises.push({ name: '', sets: '', notes: '' });\n    setDays(updated);\n  };\n\n  const updateExercise = (dayIndex, exerciseIndex, field, value) => {\n    const updated = [...days];\n    updated[dayIndex].exercises[exerciseIndex][field] = value;\n    setDays(updated);\n  };\n\n  const removeExercise = (dayIndex, exerciseIndex) => {\n    const updated = [...days];\n    updated[dayIndex].exercises.splice(exerciseIndex, 1);\n    setDays(updated);\n  };\n\n  const handleSubmit = async () => {\n    if (!name.trim()) return;\n    setLoading(true);\n\n    try {\n      const response = await apiFetch(\"/api/workouts\", {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name, description, days })\n      });\n\n      if (response.ok) {\n        onCreated();\n      }\n    } catch (error) {\n      console.error('Error creating workout:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content\" onClick={e => e.stopPropagation()} data-testid=\"create-workout-modal\">\n        <div className=\"modal-header\">\n          <h2 className=\"modal-title\">Nueva Rutina</h2>\n          <button className=\"btn btn-icon btn-secondary\" onClick={onClose}>\n            <X size={20} />\n          </button>\n        </div>\n\n        <div className=\"input-group\">\n          <label className=\"input-label\">Nombre</label>\n          <input\n            type=\"text\"\n            className=\"input\"\n            placeholder=\"Ej: Rutina Volumen\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            data-testid=\"workout-name-input\"\n          />\n        </div>\n\n        <div className=\"input-group\">\n          <label className=\"input-label\">Descripción</label>\n          <input\n            type=\"text\"\n            className=\"input\"\n            placeholder=\"Descripción opcional\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            data-testid=\"workout-description-input\"\n          />\n        </div>\n\n        <h3 style={{ fontSize: '16px', marginBottom: '12px', color: 'var(--foreground)' }}>Días de Entrenamiento</h3>\n\n        {days.map((day, dayIndex) => (\n          <div key={dayIndex} className=\"card mb-4\" style={{ background: 'var(--secondary)' }}>\n            <input\n              type=\"text\"\n              className=\"input mb-2\"\n              value={day.name}\n              onChange={(e) => updateDayName(dayIndex, e.target.value)}\n              style={{ fontWeight: '600' }}\n              data-testid={`day-name-input-${dayIndex}`}\n            />\n\n            {day.exercises.map((exercise, exIndex) => (\n              <div key={exIndex} style={{ display: 'flex', gap: '8px', marginBottom: '8px', alignItems: 'flex-start' }}>\n                <div style={{ flex: 1 }}>\n                  <input\n                    type=\"text\"\n                    className=\"input\"\n                    placeholder=\"Ejercicio\"\n                    value={exercise.name}\n                    onChange={(e) => updateExercise(dayIndex, exIndex, 'name', e.target.value)}\n                    style={{ marginBottom: '4px' }}\n                    data-testid={`exercise-name-${dayIndex}-${exIndex}`}\n                  />\n                  <div style={{ display: 'flex', gap: '4px' }}>\n                    <input\n                      type=\"text\"\n                      className=\"input\"\n                      placeholder=\"Series (3x10)\"\n                      value={exercise.sets}\n                      onChange={(e) => updateExercise(dayIndex, exIndex, 'sets', e.target.value)}\n                      style={{ flex: 1 }}\n                      data-testid={`exercise-sets-${dayIndex}-${exIndex}`}\n                    />\n                    <input\n                      type=\"text\"\n                      className=\"input\"\n                      placeholder=\"Notas\"\n                      value={exercise.notes}\n                      onChange={(e) => updateExercise(dayIndex, exIndex, 'notes', e.target.value)}\n                      style={{ flex: 1 }}\n                    />\n                  </div>\n                </div>\n                <button \n                  className=\"btn btn-icon btn-danger\"\n                  onClick={() => removeExercise(dayIndex, exIndex)}\n                  style={{ marginTop: '4px' }}\n                >\n                  <Trash2 size={16} />\n                </button>\n              </div>\n            ))}\n\n            <button \n              className=\"btn btn-sm btn-outline w-full\"\n              onClick={() => addExercise(dayIndex)}\n              data-testid={`add-exercise-btn-${dayIndex}`}\n            >\n              <Plus size={16} />\n              Añadir Ejercicio\n            </button>\n          </div>\n        ))}\n\n        <button \n          className=\"btn btn-secondary w-full mb-4\"\n          onClick={addDay}\n          data-testid=\"add-day-btn\"\n        >\n          <Plus size={16} />\n          Añadir Día\n        </button>\n\n        <button \n          className=\"btn btn-primary w-full\"\n          onClick={handleSubmit}\n          disabled={loading || !name.trim()}\n          data-testid=\"save-workout-btn\"\n        >\n          <Save size={16} />\n          {loading ? 'Guardando...' : 'Guardar Rutina'}\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// Workout Detail Page\nconst WorkoutDetailPage = () => {\n  const [workout, setWorkout] = useState(null);\n  const [sessions, setSessions] = useState([]);\n  const [activeDay, setActiveDay] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [showLogModal, setShowLogModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const { workoutId } = useParams();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetchWorkout();\n  }, [workoutId]);\n\n  const fetchWorkout = async () => {\n    try {\n      const [workoutRes, sessionsRes] = await Promise.all([\n        apiFetch(`/api/workouts/${workoutId}`, { }),\n        apiFetch(`/api/sessions?workout_id=${workoutId}`, { })\n      ]);\n\n      if (workoutRes.ok) setWorkout(await workoutRes.json());\n      if (sessionsRes.ok) setSessions(await sessionsRes.json());\n    } catch (error) {\n      console.error('Error fetching workout:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!window.confirm('¿Eliminar esta rutina?')) return;\n\n    try {\n      const response = await apiFetch(`/api/workouts/${workoutId}`, {\n        method: 'DELETE'\n      });\n\n      if (response.ok) {\n        navigate('/dashboard');\n      }\n    } catch (error) {\n      console.error('Error deleting workout:', error);\n    }\n  };\n\n  const handleExport = async (format) => {\n    try {\n      const response = await apiFetch(`/api/export/${format}/${workoutId}`, {\n      });\n\n      if (response.ok) {\n        const blob = await response.blob();\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `DragonFit_${workout.name}.${format === 'excel' ? 'xlsx' : 'pdf'}`;\n        a.click();\n        window.URL.revokeObjectURL(url);\n      }\n    } catch (error) {\n      console.error('Error exporting:', error);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading\">\n        <div className=\"loading-spinner\"></div>\n      </div>\n    );\n  }\n\n  if (!workout) {\n    return (\n      <div className=\"page-container\">\n        <div className=\"empty-state\">\n          <h3 className=\"empty-title\">Rutina no encontrada</h3>\n          <button className=\"btn btn-primary\" onClick={() => navigate('/dashboard')}>\n            Volver\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const currentDay = workout.days?.[activeDay];\n\n  return (\n    <div className=\"page-container animate-fade-in\" data-testid=\"workout-detail-page\">\n      <div className=\"header\">\n        <div>\n          <button \n            className=\"btn btn-sm btn-secondary mb-2\"\n            onClick={() => navigate('/dashboard')}\n          >\n            ← Volver\n          </button>\n          <h1 className=\"header-title\">{workout.name}</h1>\n        </div>\n        <div style={{ display: 'flex', gap: '8px' }}>\n          <button \n            className=\"btn btn-icon btn-secondary\"\n            onClick={() => navigate(`/workout/${workout.workout_id}/edit`)}\n            data-testid=\"edit-workout-btn\"\n          >\n            <Edit size={18} />\n          </button>\n          <button \n            className=\"btn btn-icon btn-danger\"\n            onClick={handleDelete}\n            data-testid=\"delete-workout-btn\"\n          >\n            <Trash2 size={18} />\n          </button>\n        </div>\n      </div>\n\n      {workout.description && (\n        <p className=\"text-muted mb-4\">{workout.description}</p>\n      )}\n\n      <div style={{ display: 'flex', gap: '8px', marginBottom: '16px' }}>\n        <button \n          className=\"btn btn-sm btn-outline\"\n          onClick={() => handleExport('excel')}\n          data-testid=\"export-excel-btn\"\n        >\n          <FileSpreadsheet size={16} />\n          Excel\n        </button>\n        <button \n          className=\"btn btn-sm btn-outline\"\n          onClick={() => handleExport('pdf')}\n          data-testid=\"export-pdf-btn\"\n        >\n          <FileText size={16} />\n          PDF\n        </button>\n      </div>\n\n      <div className=\"day-tabs\">\n        {workout.days?.map((day, index) => (\n          <button\n            key={index}\n            className={`day-tab ${activeDay === index ? 'active' : ''}`}\n            onClick={() => setActiveDay(index)}\n            data-testid={`day-tab-${index}`}\n          >\n            {day.name}\n          </button>\n        ))}\n      </div>\n\n      {currentDay?.exercises?.length > 0 ? (\n        currentDay.exercises.map((exercise, index) => (\n          <div key={index} className=\"exercise-item\" data-testid={`exercise-item-${index}`}>\n            <div className=\"exercise-header\">\n              <span className=\"exercise-name\">{exercise.name}</span>\n              <span className=\"exercise-sets\">{exercise.sets}</span>\n            </div>\n            {exercise.notes && (\n              <p className=\"exercise-notes\">{exercise.notes}</p>\n            )}\n          </div>\n        ))\n      ) : (\n        <div className=\"empty-state\">\n          <p className=\"text-muted\">No hay ejercicios en este día</p>\n        </div>\n      )}\n\n      <button className=\"btn btn-primary w-full mt-4\" onClick={() => navigate(`/workout/${workout.workout_id}/log/${activeDay}`)}>\n        <Play size={18} />\n        Registrar Sesión\n      </button>\n\n      {sessions.length > 0 && (\n        <div className=\"mt-6\">\n          <h3 style={{ fontSize: '16px', marginBottom: '12px', color: 'var(--foreground)' }}>\n            Sesiones Recientes\n          </h3>\n          {sessions.slice(0, 5).map((session) => (\n            <div key={session.session_id} className=\"card mb-2\" style={{ padding: '12px', cursor: 'pointer' }} onClick={() =>{\n                console.log('Clic en sesión:', session.session_id);\n                navigate(`/session/${session.session_id}`);\n              }}>\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                <div>\n                  <p style={{ fontWeight: '600', color: 'var(--foreground)' }}>{session.day_name}</p>\n                  <p className=\"text-muted\" style={{ fontSize: '12px' }}>{session.date}</p>\n                </div>\n                <span style={{ color: 'var(--primary)', fontSize: '12px' }}>\n                  {session.exercises?.length || 0} ejercicios\n                </span>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {showLogModal && (\n        <LogSessionModal\n          workout={workout}\n          dayIndex={activeDay}\n          onClose={() => setShowLogModal(false)}\n          onSaved={() => {\n            setShowLogModal(false);\n            fetchWorkout();\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nconst SessionDetailPage = () => {\n  const { sessionId } = useParams();\n  const navigate = useNavigate();\n\n  const [session, setSession] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchSession();\n  }, [sessionId]);\n\n  const fetchSession = async () => {\n    try {\n      const response = await apiFetch(`/api/sessions/${sessionId}`);\n      if (response.ok) {\n        const data = await response.json();\n        setSession(data);\n      }\n    } catch (error) {\n      console.error(\"Error fetching session:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading\">\n        <div className=\"loading-spinner\" />\n      </div>\n    );\n  }\n\n  if (!session) {\n    return (\n      <div className=\"page-container\">\n        <button className=\"btn btn-secondary mb-4\" onClick={() => navigate(-1)}>\n          ← Volver\n        </button>\n        <p>Sesión no encontrada</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col animate-fade-in bg-gray-900 text-white\">\n      <div className=\"page-container flex-1 py-6\">\n        {/* Botón volver */}\n        <button\n          className=\"btn btn-sm btn-secondary mb-6\"\n          onClick={() => navigate(-1)}\n        >\n          ← Volver\n        </button>\n\n        {session.exercises.length === 0 ? (\n          <div className=\"empty-state py-12\">\n            <h3 className=\"text-gray-400 text-lg\">No hay ejercicios registrados</h3>\n          </div>\n        ) : (\n          <div className=\"grid gap-6\">\n            {/* Cabecera de la sesión */}\n            <div className=\"bg-gray-800 rounded-xl shadow-xl p-6\">\n              <h1 className=\"text-2xl font-bold text-[#22c55e]\">{session.day_name}</h1>\n              <p className=\"text-sm text-gray-400\">{session.date}</p>\n              <h2 className=\"text-xl font-semibold mt-1\">{session.workout_name}</h2>\n            </div>\n\n            {/* Mini tabla de ejercicios */}\n            <div className=\"bg-gray-800 rounded-xl shadow-md overflow-hidden\">\n              <table className=\"w-full table-fixed border-collapse border border-gray-700\">\n                <thead className=\"bg-gray-700 text-gray-200 text-left text-sm uppercase\">\n                  <tr>\n                    <th className=\"px-4 py-2 w-2/5\">Ejercicio</th>\n                    <th className=\"px-4 py-2 w-1/6 text-right\">Peso (kg)</th>\n                    <th className=\"px-4 py-2 w-1/6 text-right\">Reps</th>\n                    <th className=\"px-4 py-2 w-1/6 text-center\">Fecha</th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-gray-800 divide-y divide-gray-700\">\n                  {session.exercises.map((exercise, index) => (\n                    <tr key={index} className=\"hover:bg-gray-700 transition-colors\">\n                      {/* Nombre del ejercicio con wrap seguro */}\n                      <td className=\"px-4 py-2 font-medium break-words\" style={{ wordBreak: 'break-word', whiteSpace: 'normal' }}>\n                        <div>{exercise.exercise_name}</div> \n                            {exercise.notes && (\n                              <div className=\"mt-1 text-xs text-gray-400 italic\" style={{lineHeight: '1.2',display: '-webkit-box',WebkitLineClamp: 3,WebkitBoxOrient: 'vertical',overflow: 'hidden' }}>\n                                📝 {exercise.notes}\n                              </div>\n                            )}\n                      </td>\n                      <td className=\"px-4 py-2 text-right text-[#22c55e] font-semibold\">{exercise.weight}</td>\n                      <td className=\"px-4 py-2 text-right\">{exercise.reps}</td>\n                      <td className=\"px-4 py-2 text-center text-gray-400\">{session.date}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Log Session Modal\nconst LogSessionModal = ({ workout, dayIndex, onClose, onSaved }) => {\n  const day = workout.days?.[dayIndex];\n  const [exercises, setExercises] = useState(\n    day?.exercises?.map((_, i) => ({ exercise_index: i, weight: '', reps: '', notes: '' })) || []\n  );\n  const [loading, setLoading] = useState(false);\n\n  const updateExercise = (index, field, value) => {\n    const updated = [...exercises];\n    updated[index][field] = value;\n    setExercises(updated);\n  };\n\n  const handleSubmit = async () => {\n    setLoading(true);\n    try {\n      const response = await apiFetch(\"/api/sessions\", {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          workout_id: workout.workout_id,\n          day_index: dayIndex,\n          exercises\n        })\n      });\n\n      if (response.ok) {\n        onSaved();\n      }\n    } catch (error) {\n      console.error('Error saving session:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content\" onClick={e => e.stopPropagation()} data-testid=\"log-session-modal\">\n        <div className=\"modal-header\">\n          <h2 className=\"modal-title\">{day?.name}</h2>\n          <button className=\"btn btn-icon btn-secondary\" onClick={onClose}>\n            <X size={20} />\n          </button>\n        </div>\n\n        {day?.exercises?.map((exercise, index) => (\n          <div key={index} className=\"card mb-4\" style={{ background: 'var(--secondary)' }}>\n            <p style={{ fontWeight: '600', marginBottom: '8px', color: 'var(--foreground)' }}>\n              {exercise.name}\n            </p>\n            <p className=\"text-muted mb-2\" style={{ fontSize: '12px' }}>\n              Objetivo: {exercise.sets}\n            </p>\n            <div style={{ display: 'flex', gap: '8px' }}>\n              <input\n                type=\"text\"\n                className=\"input\"\n                placeholder=\"Peso (kg)\"\n                value={exercises[index]?.weight || ''}\n                onChange={(e) => updateExercise(index, 'weight', e.target.value)}\n                style={{ flex: 1 }}\n                data-testid={`log-weight-${index}`}\n              />\n              <input\n                type=\"text\"\n                className=\"input\"\n                placeholder=\"Reps (10,10,8)\"\n                value={exercises[index]?.reps || ''}\n                onChange={(e) => updateExercise(index, 'reps', e.target.value)}\n                style={{ flex: 1 }}\n                data-testid={`log-reps-${index}`}\n              />\n            </div>\n            <input\n              type=\"text\"\n              className=\"input mt-2\"\n              placeholder=\"Notas\"\n              value={exercises[index]?.notes || ''}\n              onChange={(e) => updateExercise(index, 'notes', e.target.value)}\n            />\n          </div>\n        ))}\n\n        <button \n          className=\"btn btn-primary w-full\"\n          onClick={handleSubmit}\n          disabled={loading}\n          data-testid=\"save-session-btn\"\n        >\n          <Save size={16} />\n          {loading ? 'Guardando...' : 'Guardar Sesión'}\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// Edit Workout Modal\nconst EditWorkoutModal = ({ workout, onClose, onSaved }) => {\n  const [name, setName] = useState(workout.name);\n  const [description, setDescription] = useState(workout.description || '');\n  const [days, setDays] = useState(workout.days || []);\n  const [loading, setLoading] = useState(false);\n\n  const addDay = () => {\n    setDays([...days, { \n      day_number: days.length + 1, \n      name: `Día ${days.length + 1}`, \n      exercises: [] \n    }]);\n  };\n\n  const updateDayName = (index, newName) => {\n    const updated = [...days];\n    updated[index].name = newName;\n    setDays(updated);\n  };\n\n  const addExercise = (dayIndex) => {\n    const updated = [...days];\n    updated[dayIndex].exercises.push({ name: '', sets: '', notes: '' });\n    setDays(updated);\n  };\n\n  const updateExercise = (dayIndex, exerciseIndex, field, value) => {\n    const updated = [...days];\n    updated[dayIndex].exercises[exerciseIndex][field] = value;\n    setDays(updated);\n  };\n\n  const removeExercise = (dayIndex, exerciseIndex) => {\n    const updated = [...days];\n    updated[dayIndex].exercises.splice(exerciseIndex, 1);\n    setDays(updated);\n  };\n\n  const handleSubmit = async () => {\n    setLoading(true);\n    try {\n      const response = await apiFetch(`/api/workouts/${workout.workout_id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name, description, days })\n      });\n\n      if (response.ok) {\n        onSaved();\n      }\n    } catch (error) {\n      console.error('Error updating workout:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content\" onClick={e => e.stopPropagation()} data-testid=\"edit-workout-modal\">\n        <div className=\"modal-header\">\n          <h2 className=\"modal-title\">Editar Rutina</h2>\n          <button className=\"btn btn-icon btn-secondary\" onClick={onClose}>\n            <X size={20} />\n          </button>\n        </div>\n\n        <div className=\"input-group\">\n          <label className=\"input-label\">Nombre</label>\n          <input\n            type=\"text\"\n            className=\"input\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            data-testid=\"edit-workout-name\"\n          />\n        </div>\n\n        <div className=\"input-group\">\n          <label className=\"input-label\">Descripción</label>\n          <input\n            type=\"text\"\n            className=\"input\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n          />\n        </div>\n\n        {days.map((day, dayIndex) => (\n          <div key={dayIndex} className=\"card mb-4\" style={{ background: 'var(--secondary)' }}>\n            <input\n              type=\"text\"\n              className=\"input mb-2\"\n              value={day.name}\n              onChange={(e) => updateDayName(dayIndex, e.target.value)}\n              style={{ fontWeight: '600' }}\n            />\n\n            {day.exercises?.map((exercise, exIndex) => (\n              <div key={exIndex} style={{ display: 'flex', gap: '8px', marginBottom: '8px', alignItems: 'flex-start' }}>\n                <div style={{ flex: 1 }}>\n                  <input\n                    type=\"text\"\n                    className=\"input\"\n                    placeholder=\"Ejercicio\"\n                    value={exercise.name}\n                    onChange={(e) => updateExercise(dayIndex, exIndex, 'name', e.target.value)}\n                    style={{ marginBottom: '4px' }}\n                  />\n                  <div style={{ display: 'flex', gap: '4px' }}>\n                    <input\n                      type=\"text\"\n                      className=\"input\"\n                      placeholder=\"Series\"\n                      value={exercise.sets}\n                      onChange={(e) => updateExercise(dayIndex, exIndex, 'sets', e.target.value)}\n                      style={{ flex: 1 }}\n                    />\n                    <input\n                      type=\"text\"\n                      className=\"input\"\n                      placeholder=\"Notas\"\n                      value={exercise.notes}\n                      onChange={(e) => updateExercise(dayIndex, exIndex, 'notes', e.target.value)}\n                      style={{ flex: 1 }}\n                    />\n                  </div>\n                </div>\n                <button \n                  className=\"btn btn-icon btn-danger\"\n                  onClick={() => removeExercise(dayIndex, exIndex)}\n                >\n                  <Trash2 size={16} />\n                </button>\n              </div>\n            ))}\n\n            <button \n              className=\"btn btn-sm btn-outline w-full\"\n              onClick={() => addExercise(dayIndex)}\n            >\n              <Plus size={16} />\n              Añadir Ejercicio\n            </button>\n          </div>\n        ))}\n\n        <button className=\"btn btn-secondary w-full mb-4\" onClick={addDay}>\n          <Plus size={16} />\n          Añadir Día\n        </button>\n\n        <button \n          className=\"btn btn-primary w-full\"\n          onClick={handleSubmit}\n          disabled={loading}\n          data-testid=\"update-workout-btn\"\n        >\n          <Save size={16} />\n          {loading ? 'Guardando...' : 'Actualizar'}\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// Progress Page\nconst ProgressPage = () => {\n  const [progress, setProgress] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [activeWorkoutId, setActiveWorkoutId] = useState(null);\n\n  useEffect(() => {\n    fetchProgress();\n  }, []);\n\n  useEffect(() => {\n    const ids = Object.keys(progress || {});\n    if (ids.length > 0 && !activeWorkoutId) {\n      setActiveWorkoutId(ids[0]);\n    }\n  }, [progress, activeWorkoutId]);\n\n  const fetchProgress = async () => {\n    try {\n      const response = await apiFetch(`/api/progress`, { });\n      if (response.ok) {\n        setProgress(await response.json());\n      }\n    } catch (error) {\n      console.error('Error fetching progress:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading\">\n        <div className=\"loading-spinner\"></div>\n      </div>\n    );\n  }\n\n  const workoutIds = Object.keys(progress).sort(\n    (a, b) => progress[b].sessions_count - progress[a].sessions_count\n  );\n\n  return (\n    <div className=\"page-container animate-fade-in\" data-testid=\"progress-page\">\n      <div className=\"header\">\n        <h1 className=\"header-title\">Progreso</h1>\n        <TrendingUp size={32} color=\"var(--primary)\" />\n      </div>\n      {workoutIds.length > 0 && (\n        <div\n          style={{\n            display: 'flex',\n            gap: '8px',\n            overflowX: 'auto',\n            marginBottom: '16px',\n            paddingBottom: '4px'\n          }}\n        >\n          {workoutIds.map((id) => {\n            const isActive = id === activeWorkoutId;\n            const workout = progress[id];\n\n            return (\n              <button\n                key={id}\n                onClick={() => setActiveWorkoutId(id)}\n                style={{\n                  padding: '8px 14px',\n                  borderRadius: '999px',\n                  fontSize: '13px',\n                  fontWeight: 600,\n                  whiteSpace: 'nowrap',\n                  border: isActive\n                    ? '1px solid var(--primary)'\n                    : '1px solid var(--border)',\n                  background: isActive\n                    ? 'rgba(34,197,94,0.15)'\n                    : 'var(--secondary)',\n                  color: 'var(--foreground)',\n                  cursor: 'pointer'\n                }}\n              >\n                {workout.workout_name}\n              </button>\n            );\n          })}\n        </div>\n      )}\n\n\n      {workoutIds.length === 0 || !activeWorkoutId ? (\n        <div className=\"empty-state\">\n          <Activity className=\"empty-icon\" />\n          <h3 className=\"empty-title\">Sin datos</h3>\n          <p className=\"empty-desc\">Registra sesiones para ver tu progreso</p>\n        </div>\n      ) : (workoutIds.filter((id) => id === activeWorkoutId).map((workoutId) => {\n          const data = progress[workoutId];\n          const exerciseIds = Object.keys(data.exercises || {});\n\n          return (\n            <div key={workoutId} className=\"mb-6\">\n              <h2\n                style={{ fontSize: '18px', marginBottom: '16px', color: 'var(--foreground)' }}\n              >\n                {data.workout_name}\n                <span className=\"text-muted\" style={{ fontSize: '14px', marginLeft: '8px' }}>\n                  ({data.sessions_count} sesiones)\n                </span>\n              </h2>\n\n              {exerciseIds.slice(0, 100).map((exIdx) => {\n                const exerciseData = data.exercises[exIdx];\n                const chartData = exerciseData\n                .sort((a, b) => new Date(a.date) - new Date(b.date))\n                .map(d => ({\n                  date: d.date.split('-').slice(1).join('/'),\n                  peso: d.weight\n                }));\n\n\n                // Tomamos el nombre del primer registro del ejercicio (ya que todos los registros son del mismo ejercicio)\n                const exerciseName = exerciseData[0]?.exercise_name || `Ejercicio ${parseInt(exIdx) + 1}`;\n\n                return (\n                  <div key={exIdx} className=\"chart-container mb-4\">\n                    <h3 className=\"chart-title\">{exerciseName}</h3>\n                    <ResponsiveContainer width=\"100%\" height={150}>\n                      <LineChart data={chartData}>\n                        <XAxis \n                          dataKey=\"date\" \n                          stroke=\"var(--muted-foreground)\" \n                          fontSize={10}\n                        />\n                        <YAxis \n                          stroke=\"var(--muted-foreground)\" \n                          fontSize={10}\n                          width={30}\n                        />\n                        <Tooltip \n                          contentStyle={{ \n                            background: 'var(--card)', \n                            border: '1px solid var(--border)',\n                            borderRadius: '8px'\n                          }}\n                        />\n                        <Line \n                          type=\"monotone\" \n                          dataKey=\"peso\" \n                          stroke=\"var(--primary)\" \n                          strokeWidth={2}\n                          dot={{ fill: 'var(--primary)', strokeWidth: 0 }}\n                        />\n                      </LineChart>\n                    </ResponsiveContainer>\n                  </div>\n                );\n              })}\n            </div>\n          );\n        })\n      )}\n    </div>\n  );\n};\n\nconst CreateWorkoutPage = () => {\n  const navigate = useNavigate();\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [days, setDays] = useState([{ day_number: 1, name: 'Día 1', exercises: [] }]);\n  const [loading, setLoading] = useState(false);\n\n  const addDay = () => setDays([...days, { day_number: days.length + 1, name: `Día ${days.length + 1}`, exercises: [] }]);\n  const addExercise = (dayIndex) => { const updated = [...days]; updated[dayIndex].exercises.push({ name: '', sets: '', notes: '' }); setDays(updated); };\n  const updateDayName = (index, newName) => { const updated = [...days]; updated[index].name = newName; setDays(updated); };\n  const updateExercise = (dayIndex, exIndex, field, value) => { const updated = [...days]; updated[dayIndex].exercises[exIndex][field] = value; setDays(updated); };\n  const removeExercise = (dayIndex, exIndex) => { const updated = [...days]; updated[dayIndex].exercises.splice(exIndex, 1); setDays(updated); };\n\n  const handleSubmit = async () => {\n    if (!name.trim()) return;\n    setLoading(true);\n    try {\n      const response = await apiFetch(\"/api/workouts\", {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name, description, days })\n      });\n      if (response.ok) navigate('/dashboard');\n    } catch (error) {\n      console.error(error);\n    } finally { setLoading(false); }\n  };\n\n  return (\n    <div className=\"page-container animate-fade-in\">\n      <div className=\"header\">\n        <button className=\"btn btn-sm btn-secondary mb-2\" onClick={() => navigate(-1)}>← Volver</button>\n        <h1 className=\"header-title\">Nueva Rutina</h1>\n      </div>\n\n      {/* Formulario igual que en la modal */}\n      <div className=\"card\">\n        <div className=\"input-group\">\n          <label className=\"input-label\">Nombre</label>\n          <input type=\"text\" className=\"input\" value={name} onChange={(e) => setName(e.target.value)} />\n        </div>\n        <div className=\"input-group\">\n          <label className=\"input-label\">Descripción</label>\n          <input type=\"text\" className=\"input\" value={description} onChange={(e) => setDescription(e.target.value)} />\n        </div>\n\n        {days.map((day, dayIndex) => (\n          <div key={dayIndex} className=\"card mb-4\" style={{ background: 'var(--secondary)' }}>\n            <input type=\"text\" className=\"input mb-2\" value={day.name} onChange={(e) => updateDayName(dayIndex, e.target.value)} style={{ fontWeight: '600' }} />\n            {day.exercises.map((ex, exIndex) => (\n              <div key={exIndex} style={{ display: 'flex', gap: '8px', marginBottom: '8px', alignItems: 'flex-start' }}>\n                <input type=\"text\" className=\"input\" placeholder=\"Ejercicio\" value={ex.name} onChange={(e) => updateExercise(dayIndex, exIndex, 'name', e.target.value)} />\n                <input type=\"text\" className=\"input\" placeholder=\"Series\" value={ex.sets} onChange={(e) => updateExercise(dayIndex, exIndex, 'sets', e.target.value)} />\n                <input type=\"text\" className=\"input\" placeholder=\"Notas\" value={ex.notes} onChange={(e) => updateExercise(dayIndex, exIndex, 'notes', e.target.value)} />\n                <button className=\"btn btn-icon btn-danger\" onClick={() => removeExercise(dayIndex, exIndex)}>X</button>\n              </div>\n            ))}\n            <button className=\"btn btn-sm btn-outline w-full\" onClick={() => addExercise(dayIndex)}>Añadir Ejercicio</button>\n          </div>\n        ))}\n        <button className=\"btn btn-secondary w-full mb-4\" onClick={addDay}>Añadir Día</button>\n        <button className=\"btn btn-primary w-full\" onClick={handleSubmit} disabled={loading}>{loading ? 'Guardando...' : 'Guardar Rutina'}</button>\n      </div>\n    </div>\n  );\n};\n\nconst LogSessionPage = () => {\n  //const { workoutId, dayIndexLog } = useParams();\n  const pathParts = window.location.pathname.split('/'); \n  const workoutId = pathParts[2];\n  const dayIndexLog = pathParts[4];\n\n  console.log({ workoutId, dayIndexLog });\n\n  const [dayIndex, setDayIndex] = useState(0);\n  const parsedDayIndex = parseInt(dayIndexLog || 0);\n  const navigate = useNavigate();\n  const [workout, setWorkout] = useState(null);\n  const [exercises, setExercises] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [lastSession, setLastSession] = useState(null);\n  const [saving, setSaving] = useState(false);\n\n\n  useEffect(() => {\n    const fetchWorkout = async () => {\n      const res = await apiFetch(`/api/workouts/${workoutId}`);\n      if (res.ok) {\n        const data = await res.json();\n        setWorkout(data);\n        setExercises(\n          data.days[parsedDayIndex].exercises.map((_, i) => ({\n            exercise_index: i,\n            weight: '',\n            reps: '',\n            notes: ''\n          }))\n        );\n      }\n      setLoading(false);\n    };\n\n    fetchWorkout();\n    fetchLastSession();\n  }, [workoutId, parsedDayIndex]);\n\n  const updateExercise = (index, field, value) => {\n    const updated = [...exercises];\n    updated[index][field] = value;\n    setExercises(updated);\n  };\n\n  const fetchLastSession = async () => {\n    try {\n      const response = await apiFetch(\n        `/api/sessions/last/${workoutId}/${dayIndexLog}`\n      );\n\n      if (response.ok) {\n        const data = await response.json();\n        setLastSession(data);\n      }\n    } catch (error) {\n      console.error(\"Error fetching last session:\", error);\n    }\n  };\n\n  const getProgressData = (exerciseIndex, currentWeight, currentReps) => {\n    if (!lastSession?.exercises) return null;\n\n    const previous = lastSession.exercises.find(\n      (ex) => ex.exercise_index === exerciseIndex\n    );\n\n    if (!previous) return null;\n\n    const prevWeight = parseFloat(previous.weight || 0);\n    const prevReps = parseInt(previous.reps || 0);\n\n    const weight = parseFloat(currentWeight || 0);\n    const reps = parseInt(currentReps || 0);\n\n    const weightDiff = weight - prevWeight;\n    const repsDiff = reps - prevReps;\n\n    let color = \"var(--muted)\";\n    if (weightDiff > 0 || (weightDiff === 0 && repsDiff > 0)) {\n      color = \"#22c55e\"; // verde\n    } else if (weightDiff < 0 || (weightDiff === 0 && repsDiff < 0)) {\n      color = \"#ef4444\"; // rojo\n    }\n\n    return {\n      previous,\n      weightDiff,\n      repsDiff,\n      color\n    };\n  };\n\n  const handleSubmit = async () => {\n    if (saving) return; \n\n    setSaving(true);\n\n    try {\n      const response = await apiFetch(\"/api/sessions\", {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          workout_id: workout.workout_id,\n          day_index: parsedDayIndex,\n          exercises\n        })\n      });\n\n      if (response.ok) {\n        navigate(`/workout/${workoutId}`);\n      } else {\n        setSaving(false);\n      }\n\n    } catch (error) {\n      console.error(error);\n      setSaving(false);\n    }\n  };\n\n\n  if (loading) return <div className=\"loading\"><div className=\"loading-spinner\" /></div>;\n  if (!workout) return <div className=\"page-container\"><p>Workout no encontrado</p></div>;\n\n  const day = workout.days[parsedDayIndex];\n\n  return (\n    <div className=\"page-container animate-fade-in\">\n      <div className=\"header\">\n        <button className=\"btn btn-sm btn-secondary mb-2\" onClick={() => navigate(-1)}>← Volver</button>\n        <h1 className=\"header-title\">{day.name}</h1>\n      </div>\n\n      {day.exercises.map((exercise, index) => {\n        const previous = lastSession?.exercises?.find(\n          (ex) => ex.exercise_index === index\n        );\n\n        const current = exercises[index] || { weight: '', reps: '', notes: '' };\n\n        const progress = getProgressData(\n          index,\n          current.weight,\n          current.reps\n        );\n\n        return (\n          <div key={index} className=\"card mb-4\" style={{ background: 'var(--secondary)' }}>\n            \n            <p style={{ fontWeight: '600', marginBottom: '8px', color: 'var(--foreground)' }}>\n              {exercise.name}\n            </p>\n\n            <p className=\"text-muted mb-2\" style={{ fontSize: '12px' }}>\n              Objetivo: {exercise.sets}\n            </p>\n\n            {previous ? (\n              <p style={{ fontSize: '12px', color: 'var(--primary)' }}>\n                Última vez: {previous.weight}kg x {previous.reps}\n              </p>\n            ) : (\n                <p style={{\n                        fontSize: '13px',      \n                        color: 'rgba(255, 255, 255, 0.85)', \n                        fontWeight: 500, \n                        textShadow: '0 0 2px rgba(0,0,0,0.6)' \n                      }}\n                    >\n                      Primera vez 💪\n                    </p>\n                )}\n\n            {previous?.notes && previous.notes.trim() !== \"\" && (\n              <div\n                style={{\n                  marginTop: '6px',\n                  padding: '8px 10px',\n                  borderRadius: '8px',\n                  background: 'rgba(34,197,94,0.08)',\n                  border: '1px solid rgba(34,197,94,0.25)',\n                  fontSize: '12px',\n                  color: 'rgba(255,255,255,0.85)',\n                  lineHeight: '1.25'\n                }}\n              >\n                <span style={{ opacity: 0.8 }}>📝 Última nota:</span>{' '}\n                <span style={{ fontStyle: 'italic' }}>{previous.notes}</span>\n              </div>\n            )}\n            <div style={{ display: 'flex', gap: '8px' }}>\n              <input\n                type=\"number\"\n                inputMode=\"decimal\"\n                className=\"input\"\n                placeholder=\"Peso (kg)\"\n                value={current.weight}\n                onChange={(e) => updateExercise(index, 'weight', e.target.value)}\n              />\n              <input\n                type=\"number\"\n                inputMode=\"decimal\"\n                className=\"input\"\n                placeholder=\"Reps\"\n                value={current.reps}\n                onChange={(e) => updateExercise(index, 'reps', e.target.value)}\n              />\n            </div>\n\n            <input\n              type=\"text\"\n              className=\"input mt-2\"\n              placeholder=\"Notas\"\n              value={current.notes}\n              onChange={(e) => updateExercise(index, 'notes', e.target.value)}\n            />\n\n            {progress && current.weight && current.reps && (\n              <p\n                style={{\n                  fontSize: '12px',\n                  marginTop: '4px',\n                  color: progress.color,\n                  fontWeight: '600'\n                }}\n              >\n                {progress.weightDiff > 0 && `+${progress.weightDiff}kg `}\n                {progress.weightDiff < 0 && `${progress.weightDiff}kg `}\n                {progress.repsDiff > 0 && `+${progress.repsDiff} reps`}\n                {progress.repsDiff < 0 && `${progress.repsDiff} reps`}\n                {progress.weightDiff === 0 &&\n                  progress.repsDiff === 0 &&\n                  \"Igual que la última sesión\"}\n              </p>\n            )}\n\n          </div>\n        );\n      })}\n      <button\n          className=\"btn btn-primary w-full\"\n          onClick={handleSubmit}\n          disabled={saving}\n        >\n          {saving ? (\n            <div className=\"loading-spinner\" style={{ width: '20px', height: '20px' }} />\n          ) : (\n            \"Guardar Sesión\"\n          )}\n      </button>\n    </div>\n  );\n};\n\n// Calendar Page\nconst CalendarPage = () => {\n  const [sessions, setSessions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetchSessions();\n  }, []);\n\n  const fetchSessions = async () => {\n    try {\n      const response = await apiFetch(\"/api/sessions\", { });\n      if (response.ok) {\n        setSessions(await response.json());\n      }\n    } catch (error) {\n      console.error('Error fetching sessions:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Group sessions by date\n  const sessionsByDate = sessions.reduce((acc, session) => {\n    const date = session.date;\n    if (!acc[date]) acc[date] = [];\n    acc[date].push(session);\n    return acc;\n  }, {});\n\n  const dates = Object.keys(sessionsByDate).sort().reverse();\n\n  if (loading) {\n    return (\n      <div className=\"loading\">\n        <div className=\"loading-spinner\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"page-container animate-fade-in\" data-testid=\"calendar-page\">\n      <div className=\"header\">\n        <h1 className=\"header-title\">Historial</h1>\n        <Calendar size={32} color=\"var(--primary)\" />\n      </div>\n\n      {dates.length === 0 ? (\n        <div className=\"empty-state\">\n          <Calendar className=\"empty-icon\" />\n          <h3 className=\"empty-title\">Sin sesiones</h3>\n          <p className=\"empty-desc\">Registra tu primera sesión de entrenamiento</p>\n        </div>\n      ) : (\n        dates.map((date) => (\n          <div key={date} className=\"mb-4\">\n            <h3 style={{ fontSize: '14px', color: 'var(--muted-foreground)', marginBottom: '8px' }}>\n              {new Date(date + 'T00:00:00').toLocaleDateString('es-ES', { \n                weekday: 'long', \n                year: 'numeric', \n                month: 'long', \n                day: 'numeric' \n              })}\n            </h3>\n            {sessionsByDate[date].map((session) => (\n              <div key={session.session_id} className=\"card mb-2\" style={{ padding: '12px', cursor: 'pointer' }} onClick={() =>{\n                navigate(`/session/${session.session_id}`);}}>\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                  <div>\n                    <p style={{ fontWeight: '600', color: 'var(--foreground)' }}>{session.workout_name}</p>\n                    <p className=\"text-muted\" style={{ fontSize: '12px' }}>{session.day_name}</p>\n                  </div>\n                  <span style={{ color: 'var(--primary)', fontSize: '14px', fontWeight: '600' }}>\n                    {session.exercises?.length || 0} ejercicios\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        ))\n      )}\n    </div>\n  );\n};\n\nconst EditWorkoutPage = () => {\n  const { workoutId } = useParams();\n  const navigate = useNavigate();\n\n  const [loading, setLoading] = useState(true);\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [days, setDays] = useState([]);\n\n  useEffect(() => {\n    fetchWorkout();\n  }, [workoutId]);\n\n  const fetchWorkout = async () => {\n    try {\n      const response = await apiFetch(`/api/workouts/${workoutId}`);\n      if (response.ok) {\n        const data = await response.json();\n        setName(data.name);\n        setDescription(data.description || '');\n        setDays(data.days || []);\n      }\n    } catch (error) {\n      console.error(\"Error fetching workout:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addDay = () => {\n    setDays([\n      ...days,\n      { day_number: days.length + 1, name: `Día ${days.length + 1}`, exercises: [] }\n    ]);\n  };\n\n  const updateDayName = (index, value) => {\n    const updated = [...days];\n    updated[index].name = value;\n    setDays(updated);\n  };\n\n  const addExercise = (dayIndex) => {\n    const updated = [...days];\n    updated[dayIndex].exercises.push({ name: '', sets: '', notes: '' });\n    setDays(updated);\n  };\n\n  const updateExercise = (dayIndex, exIndex, field, value) => {\n    const updated = [...days];\n    updated[dayIndex].exercises[exIndex][field] = value;\n    setDays(updated);\n  };\n\n  const removeExercise = (dayIndex, exIndex) => {\n    const updated = [...days];\n    updated[dayIndex].exercises.splice(exIndex, 1);\n    setDays(updated);\n  };\n\n  const handleSubmit = async () => {\n    try {\n      const response = await apiFetch(`/api/workouts/${workoutId}`, {\n        method: 'PUT',\n        body: JSON.stringify({ name, description, days })\n      });\n\n      if (response.ok) {\n        navigate(`/workout/${workoutId}`);\n      }\n    } catch (error) {\n      console.error(\"Error updating workout:\", error);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading\">\n        <div className=\"loading-spinner\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"page-container animate-fade-in\">\n\n      <div className=\"header\">\n        <button\n          className=\"btn btn-sm btn-secondary mb-2\"\n          onClick={() => navigate(-1)}\n        >\n          ← Volver\n        </button>\n        <h1 className=\"header-title\">Editar Rutina</h1>\n      </div>\n\n      <div className=\"card\">\n\n        <div className=\"input-group\">\n          <label className=\"input-label\">Nombre</label>\n          <input\n            type=\"text\"\n            className=\"input\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n        </div>\n\n        <div className=\"input-group\">\n          <label className=\"input-label\">Descripción</label>\n          <input\n            type=\"text\"\n            className=\"input\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n          />\n        </div>\n\n        {days.map((day, dayIndex) => (\n          <div key={dayIndex} className=\"card mb-4\" style={{ background: 'var(--secondary)' }}>\n\n            <input\n              type=\"text\"\n              className=\"input mb-2\"\n              value={day.name}\n              onChange={(e) => updateDayName(dayIndex, e.target.value)}\n              style={{ fontWeight: '600' }}\n            />\n\n            {day.exercises?.map((exercise, exIndex) => (\n              <div key={exIndex} style={{ display: 'flex', gap: '8px', marginBottom: '8px', alignItems: 'flex-start' }}>\n                <input\n                  type=\"text\"\n                  className=\"input\"\n                  placeholder=\"Ejercicio\"\n                  value={exercise.name}\n                  onChange={(e) => updateExercise(dayIndex, exIndex, 'name', e.target.value)}\n                />\n                <input\n                  type=\"text\"\n                  className=\"input\"\n                  placeholder=\"Series\"\n                  value={exercise.sets}\n                  onChange={(e) => updateExercise(dayIndex, exIndex, 'sets', e.target.value)}\n                />\n                <input\n                  type=\"text\"\n                  className=\"input\"\n                  placeholder=\"Notas\"\n                  value={exercise.notes}\n                  onChange={(e) => updateExercise(dayIndex, exIndex, 'notes', e.target.value)}\n                />\n                <button\n                  className=\"btn btn-icon btn-danger\"\n                  onClick={() => removeExercise(dayIndex, exIndex)}\n                >\n                  <Trash2 size={16} />\n                </button>\n              </div>\n            ))}\n\n            <button\n              className=\"btn btn-sm btn-outline w-full\"\n              onClick={() => addExercise(dayIndex)}\n            >\n              Añadir Ejercicio\n            </button>\n\n          </div>\n        ))}\n\n        <button className=\"btn btn-secondary w-full mb-4\" onClick={addDay}>\n          Añadir Día\n        </button>\n\n        <button\n          className=\"btn btn-primary w-full\"\n          onClick={handleSubmit}\n        >\n          Actualizar Rutina\n        </button>\n\n      </div>\n    </div>\n  );\n};\n\n\n// Profile Page\nconst ProfilePage = () => {\n  const { user, logout } = useAuth();\n  const navigate = useNavigate();\n\n  const handleLogout = async () => {\n    await logout();\n    navigate('/login');\n  };\n\n  return (\n    <div className=\"page-container animate-fade-in\" data-testid=\"profile-page\">\n      <div className=\"header\">\n        <h1 className=\"header-title\">Perfil</h1>\n        <User size={32} color=\"var(--primary)\" />\n      </div>\n\n      <div className=\"card\" style={{ textAlign: 'center', padding: '32px' }}>\n        {user?.picture ? (\n          <img \n            src={user.picture} \n            alt={user.name}\n            style={{ width: '80px', height: '80px', borderRadius: '50%', margin: '0 auto 16px' }}\n          />\n        ) : (\n          <div style={{ \n            width: '80px', \n            height: '80px', \n            borderRadius: '50%', \n            background: 'var(--primary)', \n            display: 'flex', \n            alignItems: 'center', \n            justifyContent: 'center',\n            margin: '0 auto 16px',\n            fontSize: '32px',\n            fontWeight: '700',\n            color: 'var(--primary-foreground)'\n          }}>\n            {user?.name?.charAt(0).toUpperCase() || 'U'}\n          </div>\n        )}\n        <h2 style={{ fontSize: '24px', marginBottom: '4px', color: 'var(--foreground)' }}>\n          {user?.name || 'Usuario'}\n        </h2>\n        <p className=\"text-muted\">{user?.email}</p>\n      </div>\n\n      <div className=\"card mt-4\">\n      <h3\n        style={{\n          fontSize: \"16px\",\n          marginBottom: \"16px\",\n          color: \"var(--foreground)\",\n        }}\n      >\n        DragonFit\n      </h3>\n\n      {/* Frase principal */}\n      <p\n        style={{\n          fontSize: \"18px\",\n          fontWeight: \"700\",\n          textAlign: \"center\",\n          marginBottom: \"12px\",\n          letterSpacing: \"0.5px\",\n        }}\n      >\n        From Bodybuilders to Bodybuilders\n      </p>\n\n      {/* Créditos */}\n      <p\n        style={{\n          fontSize: \"13px\",\n          textAlign: \"center\",\n          color: \"var(--muted-foreground)\",\n          marginBottom: \"20px\",\n        }}\n      >\n        credits by{\" \"}\n        <a\n          href=\"https://instagram.com/mikel_lontso\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          style={{ fontWeight: \"600\" }}\n        >\n          @mikel_lontso\n        </a>\n      </p>\n\n      {/* Enlaces */}\n      <div style={{ textAlign: \"center\", fontSize: \"14px\" }}>\n        <p style={{ marginBottom: \"8px\" }}>\n          <a href=\"/privacy\" style={{ fontWeight: \"500\" }}>\n            Política de privacidad\n          </a>\n        </p>\n\n        <p>\n          <a\n            href=\"https://lontsofitness.netlify.app/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style={{ fontWeight: \"500\" }}\n          >\n            Visitar web oficial\n          </a>\n        </p>\n      </div>\n    </div>\n\n      <button \n        className=\"btn btn-danger w-full mt-4\"\n        onClick={handleLogout}\n        data-testid=\"logout-btn\"\n      >\n        <LogOut size={18} />\n        Cerrar Sesión\n      </button>\n    </div>\n  );\n};\n\n// Bottom Navigation\nconst BottomNav = () => {\n  const location = useLocation();\n  const path = location.pathname;\n\n  return (\n    <nav className=\"bottom-nav\">\n      <Link to=\"/dashboard\" className={`nav-item ${path === '/dashboard' ? 'active' : ''}`} data-testid=\"nav-dashboard\">\n        <Dumbbell />\n        <span>Rutinas</span>\n      </Link>\n      <Link to=\"/progress\" className={`nav-item ${path === '/progress' ? 'active' : ''}`} data-testid=\"nav-progress\">\n        <TrendingUp />\n        <span>Progreso</span>\n      </Link>\n      <Link to=\"/calendar\" className={`nav-item ${path === '/calendar' ? 'active' : ''}`} data-testid=\"nav-calendar\">\n        <Calendar />\n        <span>Historial</span>\n      </Link>\n      <Link to=\"/profile\" className={`nav-item ${path === '/profile' ? 'active' : ''}`} data-testid=\"nav-profile\">\n        <User />\n        <span>Perfil</span>\n      </Link>\n    </nav>\n  );\n};\n\n// useParams hook for workout detail\nconst useParams = () => {\n  const location = useLocation();\n  const path = location.pathname;\n\n  // Buscar workoutId\n  const workoutMatch = path.match(/\\/workout\\/([^/]+)/);\n  if (workoutMatch) {\n    return { workoutId: workoutMatch[1] };\n  }\n\n  // Buscar sessionId\n  const sessionMatch = path.match(/\\/session\\/([^/]+)/);\n  if (sessionMatch) {\n    return { sessionId: sessionMatch[1] };\n  }\n\n  // Ninguno encontrado\n  return {};\n};\n\n\n// Main App Router\nconst AppRouter = () => {\n  const location = useLocation();\n\n  // Check for session_id in URL hash (OAuth callback)\n  if (location.hash?.includes('session_id=')) {\n    return <AuthCallback />;\n  }\n\n  return (\n    <Routes>\n      <Route path=\"/login\" element={<LoginPage />} />\n      <Route path=\"/privacy\" element={<PrivacyPolicyPage />} />\n      <Route path=\"/dashboard\" element={\n        <ProtectedRoute>\n          <DashboardPage />\n          <BottomNav />\n        </ProtectedRoute>\n      } />\n      <Route path=\"/progress\" element={\n        <ProtectedRoute>\n          <ProgressPage />\n          <BottomNav />\n        </ProtectedRoute>\n      } />\n      <Route path=\"/calendar\" element={\n        <ProtectedRoute>\n          <CalendarPage />\n          <BottomNav />\n        </ProtectedRoute>\n      } />\n      <Route path=\"/profile\" element={\n        <ProtectedRoute>\n          <ProfilePage />\n          <BottomNav />\n        </ProtectedRoute>\n      } />\n      <Route path=\"/session/:sessionId\" element={\n        <ProtectedRoute>\n          <SessionDetailPage />\n          <BottomNav />\n        </ProtectedRoute>\n      } />\n      <Route path=\"/workout/create\" element={\n        <ProtectedRoute>\n          <CreateWorkoutPage />\n          <BottomNav />\n        </ProtectedRoute>\n      } />\n       <Route path=\"/workout/:workoutId/log/:dayIndexLog\" element={\n        <ProtectedRoute>\n          <LogSessionPage />\n          <BottomNav />\n        </ProtectedRoute>\n      } />\n        <Route path=\"/workout/:workoutId/edit\" element={\n          <ProtectedRoute>\n            <EditWorkoutPage />\n            <BottomNav />\n          </ProtectedRoute>\n        }/>\n      <Route path=\"/workout/:workoutId\" element={\n        <ProtectedRoute>\n          <WorkoutDetailPage />\n          <BottomNav />\n        </ProtectedRoute>\n      } />\n      <Route path=\"*\" element={<Navigate to=\"/dashboard\" replace />} />\n    </Routes>\n  );\n};\n\n// Main App\nfunction App() {\n  return (\n    <BrowserRouter>\n      <AuthProvider>\n        <div className=\"app-container\">\n          <AppRouter />\n        </div>\n      </AuthProvider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}